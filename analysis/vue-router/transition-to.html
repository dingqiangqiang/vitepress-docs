<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è·¯å¾„åˆ‡æ¢ | StriveDocs</title>
    <meta name="description" content="å‰ç«¯æŠ€æœ¯åšå®¢">
    <link rel="preload stylesheet" href="/vitepress-docs/assets/style.20d70128.css" as="style">
    
    <script type="module" src="/vitepress-docs/assets/app.b7331eb3.js"></script>
    <link rel="preload" href="/vitepress-docs/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/vitepress-docs/assets/chunks/framework.85f79a96.js">
    <link rel="modulepreload" href="/vitepress-docs/assets/chunks/theme.810e4eeb.js">
    <link rel="modulepreload" href="/vitepress-docs/assets/analysis_vue-router_transition-to.md.f606872b.lean.js">
    <link rel="icon" href="/docs/favicon.ico">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6be51355><!--[--><!--]--><!--[--><span tabindex="-1" data-v-ae3e3f51></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-ae3e3f51> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6be51355 data-v-7e5bc4a5><div class="VPNavBar has-sidebar" data-v-7e5bc4a5 data-v-faa4ef78><div class="container" data-v-faa4ef78><div class="title" data-v-faa4ef78><div class="VPNavBarTitle has-sidebar" data-v-faa4ef78 data-v-8bbac535><a class="title" href="/vitepress-docs/" data-v-8bbac535><!--[--><!--]--><!--[--><img class="VPImage logo" src="./logo.svg" alt data-v-6db2186b><!--]--><!--[-->StriveDocs<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-faa4ef78><div class="curtain" data-v-faa4ef78></div><div class="content-body" data-v-faa4ef78><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-faa4ef78><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-faa4ef78 data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-docs/analysis/guide/" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->ğŸ”¥ Vue.js æŠ€æœ¯æ­ç§˜<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-docs/react/hooks.html" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->ğŸ React<!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-docs/mini-program/design.html" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->â­ å°ç¨‹åº<!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> å‰ç«¯è¿›é˜¶ <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/vue-cli/01.html" data-v-2f2cfafc><!--[-->ğŸ è„šæ‰‹æ¶<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/typescript/syntax.html" data-v-2f2cfafc><!--[-->ğŸ”¥ TS ç›¸å…³<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/axios/01.html" data-v-2f2cfafc><!--[-->Axios æºç è§£æ<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/structure/vite/" data-v-2f2cfafc><!--[-->æ„å»ºå·¥å…·<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/algorithm/tree.html" data-v-2f2cfafc><!--[-->æ•°æ®ç»“æ„ä¸ç®—æ³•<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/design-pattern/" data-v-2f2cfafc><!--[-->è®¾è®¡æ¨¡å¼<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/component-library/guide.html" data-v-2f2cfafc><!--[-->ç»„ä»¶åº“<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-e7ea1737 data-v-69e747b5><p class="title" data-v-69e747b5>å•å…ƒæµ‹è¯•</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/test/jest/" data-v-2f2cfafc><!--[-->Jest<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/network/" data-v-2f2cfafc><!--[-->ç½‘ç»œã€åè®®<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-7f418b0f data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-764effdf><span class="text" data-v-764effdf><!----> å…¨æ ˆåŸºçŸ³ <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-764effdf><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><div class="items" data-v-e7ea1737><!--[--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/node/" data-v-2f2cfafc><!--[-->Node<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/express/" data-v-2f2cfafc><!--[-->Express<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/koa/onion.html" data-v-2f2cfafc><!--[-->Koa<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e7ea1737 data-v-2f2cfafc><a class="VPLink link" href="/vitepress-docs/database/mysql/" data-v-2f2cfafc><!--[-->æ•°æ®åº“<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/vitepress-docs/develop-summary/string.html" tabindex="0" data-v-7f418b0f data-v-5e623618><!--[-->ğŸ“ å¤‡å¿˜å½•<!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-faa4ef78 data-v-f6a63727><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-f6a63727 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-faa4ef78 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/1398234521812008/posts" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg width="36" height="28" viewBox="0 0 36 28" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5875 6.77268L21.8232 3.40505L17.5875 0.00748237L17.5837 0L13.3555 3.39757L17.5837 6.76894L17.5875 6.77268ZM17.5863 17.3955H17.59L28.5161 8.77432L25.5526 6.39453L17.59 12.6808H17.5863L17.5825 12.6845L9.61993 6.40201L6.66016 8.78181L17.5825 17.3992L17.5863 17.3955ZM17.5828 23.2891L17.5865 23.2854L32.2133 11.7456L35.1768 14.1254L28.5238 19.3752L17.5865 28L0.284376 14.3574L0 14.1291L2.95977 11.7531L17.5828 23.2891Z" fill="#1E80FF"/>
        </svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-faa4ef78 data-v-40855f84 data-v-764effdf><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-764effdf><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-764effdf><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-764effdf><div class="VPMenu" data-v-764effdf data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-40855f84><div class="item appearance" data-v-40855f84><p class="label" data-v-40855f84>å¤–è§‚</p><div class="appearance-action" data-v-40855f84><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-40855f84 data-v-82b282f1 data-v-f3c41672><span class="check" data-v-f3c41672><span class="icon" data-v-f3c41672><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-82b282f1><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-82b282f1><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-40855f84><div class="item social-links" data-v-40855f84><div class="VPSocialLinks social-links-list" data-v-40855f84 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/vuejs/vitepress" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><a class="VPSocialLink no-icon" href="https://juejin.cn/user/1398234521812008/posts" aria-label target="_blank" rel="noopener" data-v-7bc22406 data-v-f80f8133><svg width="36" height="28" viewBox="0 0 36 28" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5875 6.77268L21.8232 3.40505L17.5875 0.00748237L17.5837 0L13.3555 3.39757L17.5837 6.76894L17.5875 6.77268ZM17.5863 17.3955H17.59L28.5161 8.77432L25.5526 6.39453L17.59 12.6808H17.5863L17.5825 12.6845L9.61993 6.40201L6.66016 8.78181L17.5825 17.3992L17.5863 17.3955ZM17.5828 23.2891L17.5865 23.2854L32.2133 11.7456L35.1768 14.1254L28.5238 19.3752L17.5865 28L0.284376 14.3574L0 14.1291L2.95977 11.7531L17.5828 23.2891Z" fill="#1E80FF"/>
        </svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-faa4ef78 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-6be51355 data-v-5cfd5582><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-5cfd5582><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-5cfd5582><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-5cfd5582>å½’æ¡£</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-5cfd5582 data-v-d5bb9d56><button data-v-d5bb9d56>è¿”å›é¡¶éƒ¨</button><!----></div></div><aside class="VPSidebar" data-v-6be51355 data-v-845b8fc6><div class="curtain" data-v-845b8fc6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-845b8fc6><span class="visually-hidden" id="sidebar-aria-label" data-v-845b8fc6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>ä»‹ç»</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/guide/" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>å‡†å¤‡å·¥ä½œ</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/prepare/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/prepare/flow.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>è®¤è¯† Flow</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/prepare/directory.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Vue.js æºç ç›®å½•è®¾è®¡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/prepare/build.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Vue.js æºç æ„å»º</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/prepare/entrance.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>ä»å…¥å£å¼€å§‹</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>æ•°æ®é©±åŠ¨</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/data-driven/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/data-driven/new-vue.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>new Vue å‘ç”Ÿäº†ä»€ä¹ˆ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/data-driven/mounted.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Vue å®ä¾‹æŒ‚è½½çš„å®ç°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/data-driven/render.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>render</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/data-driven/virtual-dom.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Virtual DOM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/data-driven/create-element.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>createElement</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/data-driven/update.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>update</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>ç»„ä»¶åŒ–</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/components/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/components/create-component.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>createComponent</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/components/patch.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>patch</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/components/merge-option.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>åˆå¹¶é…ç½®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/components/lifecycle.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>ç”Ÿå‘½å‘¨æœŸ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/components/component-register.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>ç»„ä»¶æ³¨å†Œ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/components/async-component.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>å¼‚æ­¥ç»„ä»¶</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>æ·±å…¥å“åº”å¼åŸç†</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/reactive-object.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>å“åº”å¼å¯¹è±¡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/getters.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>ä¾èµ–æ”¶é›†</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/setters.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>æ´¾å‘æ›´æ–°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/next-tick.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>nextTick</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/questions.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/computed-watcher.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>è®¡ç®—å±æ€§ VS ä¾¦å¬å±æ€§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/component-update.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>ç»„ä»¶æ›´æ–°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/props.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Props (v2.6.11)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/reactive/summary.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>åŸç†å›¾</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>ç¼–è¯‘</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/compile/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/compile/entrance.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>ç¼–è¯‘å…¥å£</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/compile/parse.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>parse</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/compile/optimize.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>optimize</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/compile/codegen.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>codegen</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>æ‰©å±•</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/extend/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/extend/event.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>event</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/extend/v-model.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>v-model</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/extend/slot.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>slot</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/extend/keep-alive.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>keep-alive</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/extend/transition.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>transition</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/extend/transition-group.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>transition-group</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible has-active" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>Vue Router</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vue-router/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vue-router/install.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>è·¯ç”±æ³¨å†Œ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vue-router/router.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>VueRouter å¯¹è±¡</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vue-router/matcher.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>matcher</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link is-active has-active" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vue-router/transition-to.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>è·¯å¾„åˆ‡æ¢</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>Vuex</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vuex/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vuex/init.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Vuex åˆå§‹åŒ–</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vuex/api.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/vuex/plugin.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82> æ’ä»¶</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-845b8fc6><section class="VPSidebarItem level-0 collapsible" data-v-845b8fc6 data-v-4fbabd82><div class="item" role="button" tabindex="0" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><h2 class="text" data-v-4fbabd82>Pinia</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-4fbabd82><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-4fbabd82><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-4fbabd82><!--[--><div class="VPSidebarItem level-1 is-link" data-v-4fbabd82 data-v-4fbabd82><div class="item" data-v-4fbabd82><div class="indicator" data-v-4fbabd82></div><a class="VPLink link link" href="/vitepress-docs/analysis/pinia/introduction.html" data-v-4fbabd82><!--[--><p class="text" data-v-4fbabd82>Introduction</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6be51355 data-v-3107c4ee><div class="VPDoc has-sidebar has-aside" data-v-3107c4ee data-v-6b87e69f><!--[--><!--]--><div class="container" data-v-6b87e69f><div class="aside" data-v-6b87e69f><div class="aside-curtain" data-v-6b87e69f></div><div class="aside-container" data-v-6b87e69f><div class="aside-content" data-v-6b87e69f><div class="VPDocAside" data-v-6b87e69f data-v-3f215769><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-3f215769 data-v-ff0f39c8><div class="content" data-v-ff0f39c8><div class="outline-marker" data-v-ff0f39c8></div><div class="outline-title" data-v-ff0f39c8>å¯¼èˆªæ </div><nav aria-labelledby="doc-outline-aria-label" data-v-ff0f39c8><span class="visually-hidden" id="doc-outline-aria-label" data-v-ff0f39c8> Table of Contents for current page </span><ul class="root" data-v-ff0f39c8 data-v-b0ff2abe><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-6b87e69f><div class="content-container" data-v-6b87e69f><!--[--><!--]--><!----><main class="main" data-v-6b87e69f><div style="position:relative;" class="vp-doc _vitepress-docs_analysis_vue-router_transition-to" data-v-6b87e69f><div><h1 id="è·¯å¾„åˆ‡æ¢" tabindex="-1">è·¯å¾„åˆ‡æ¢ <a class="header-anchor" href="#è·¯å¾„åˆ‡æ¢" aria-label="Permalink to &quot;è·¯å¾„åˆ‡æ¢&quot;">â€‹</a></h1><p><code>history.transitionTo</code> æ˜¯ Vue-Router ä¸­éå¸¸é‡è¦çš„æ–¹æ³•ï¼Œå½“æˆ‘ä»¬åˆ‡æ¢è·¯ç”±çº¿è·¯çš„æ—¶å€™ï¼Œå°±ä¼šæ‰§è¡Œåˆ°è¯¥æ–¹æ³•ï¼Œå‰ä¸€èŠ‚æˆ‘ä»¬åˆ†æäº† <code>matcher</code> çš„ç›¸å…³å®ç°ï¼ŒçŸ¥é“å®ƒæ˜¯å¦‚ä½•æ‰¾åˆ°åŒ¹é…çš„æ–°çº¿è·¯ï¼Œé‚£ä¹ˆåŒ¹é…åˆ°æ–°çº¿è·¯ååˆåšäº†å“ªäº›äº‹æƒ…ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®Œæ•´åˆ†æä¸€ä¸‹ <code>transitionTo</code> çš„å®ç°ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/history/base.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">transitionTo</span><span style="color:#E1E4E8;"> (location: RawLocation, onComplete</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function, onAbort</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.</span><span style="color:#B392F0;">match</span><span style="color:#E1E4E8;">(location, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">confirmTransition</span><span style="color:#E1E4E8;">(route, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">updateRoute</span><span style="color:#E1E4E8;">(route)</span></span>
<span class="line"><span style="color:#E1E4E8;">    onComplete </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onComplete</span><span style="color:#E1E4E8;">(route)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">ensureURL</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.ready) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.ready </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.readyCbs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">cb</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">(route) })</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, </span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (onAbort) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">onAbort</span><span style="color:#E1E4E8;">(err)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (err </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.ready) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.ready </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.readyErrorCbs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">cb</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">(err) })</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>transitionTo</code> é¦–å…ˆæ ¹æ®ç›®æ ‡ <code>location</code> å’Œå½“å‰è·¯å¾„ <code>this.current</code> æ‰§è¡Œ <code>this.router.match</code> æ–¹æ³•å»åŒ¹é…åˆ°ç›®æ ‡çš„è·¯å¾„ã€‚è¿™é‡Œ <code>this.current</code> æ˜¯ <code>history</code> ç»´æŠ¤çš„å½“å‰è·¯å¾„ï¼Œå®ƒçš„åˆå§‹å€¼æ˜¯åœ¨ <code>history</code> çš„æ„é€ å‡½æ•°ä¸­åˆå§‹åŒ–çš„ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">START</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>START</code> çš„å®šä¹‰åœ¨ <code>src/util/route.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">START</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createRoute</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  path: </span><span style="color:#9ECBFF;">&#39;/&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>è¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªåˆå§‹çš„ <code>Route</code>ï¼Œè€Œ <code>transitionTo</code> å®é™…ä¸Šä¹Ÿå°±æ˜¯åœ¨åˆ‡æ¢ <code>this.current</code>ï¼Œç¨åæˆ‘ä»¬ä¼šçœ‹åˆ°ã€‚</p><p>æ‹¿åˆ°æ–°çš„è·¯å¾„åï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±ä¼šæ‰§è¡Œ <code>confirmTransition</code> æ–¹æ³•å»åšçœŸæ­£çš„åˆ‡æ¢ï¼Œç”±äºè¿™ä¸ªè¿‡ç¨‹å¯èƒ½æœ‰ä¸€äº›å¼‚æ­¥çš„æ“ä½œï¼ˆå¦‚å¼‚æ­¥ç»„ä»¶ï¼‰ï¼Œæ‰€ä»¥æ•´ä¸ª <code>confirmTransition</code> API è®¾è®¡æˆå¸¦æœ‰æˆåŠŸå›è°ƒå‡½æ•°å’Œå¤±è´¥å›è°ƒå‡½æ•°ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹å®ƒçš„å®šä¹‰ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">confirmTransition</span><span style="color:#E1E4E8;"> (route: Route, onComplete: Function, onAbort</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">current</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">err</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">isError</span><span style="color:#E1E4E8;">(err)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.errorCbs.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.errorCbs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">cb</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">(err) })</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">warn</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;uncaught error during route navigation:&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">error</span><span style="color:#E1E4E8;">(err)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    onAbort </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onAbort</span><span style="color:#E1E4E8;">(err)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">isSameRoute</span><span style="color:#E1E4E8;">(route, current) </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">    route.matched.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> current.matched.</span><span style="color:#79B8FF;">length</span></span>
<span class="line"><span style="color:#E1E4E8;">  ) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">ensureURL</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">updated</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">deactivated</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">activated</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resolveQueue</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current.matched, route.matched)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">queue</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [].</span><span style="color:#B392F0;">concat</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">extractLeaveGuards</span><span style="color:#E1E4E8;">(deactivated),</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.beforeHooks,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">extractUpdateHooks</span><span style="color:#E1E4E8;">(updated),</span></span>
<span class="line"><span style="color:#E1E4E8;">    activated.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">m</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> m.beforeEnter),</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">resolveAsyncComponents</span><span style="color:#E1E4E8;">(activated)</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.pending </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">iterator</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">hook</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">next</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.pending </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> route) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">hook</span><span style="color:#E1E4E8;">(route, current, (</span><span style="color:#FFAB70;">to</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isError</span><span style="color:#E1E4E8;">(to)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">ensureURL</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;string&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">          (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;object&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to.path </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;string&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to.name </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;string&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">          ))</span></span>
<span class="line"><span style="color:#E1E4E8;">        ) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;object&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> to.replace) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">          } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      })</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">(e)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">runQueue</span><span style="color:#E1E4E8;">(queue, iterator, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">postEnterCbs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isValid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">enterGuards</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractEnterGuards</span><span style="color:#E1E4E8;">(activated, postEnterCbs, isValid)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">queue</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> enterGuards.</span><span style="color:#B392F0;">concat</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.resolveHooks)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">runQueue</span><span style="color:#E1E4E8;">(queue, iterator, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.pending </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> route) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.pending </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">onComplete</span><span style="color:#E1E4E8;">(route)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.app) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.app.</span><span style="color:#B392F0;">$nextTick</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          postEnterCbs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">cb</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">() })</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><p>é¦–å…ˆå®šä¹‰äº† <code>abort</code> å‡½æ•°ï¼Œç„¶ååˆ¤æ–­å¦‚æœæ»¡è¶³è®¡ç®—åçš„ <code>route</code> å’Œ <code>current</code> æ˜¯ç›¸åŒè·¯å¾„çš„è¯ï¼Œåˆ™ç›´æ¥è°ƒç”¨ <code>this.ensureUrl</code> å’Œ <code>abort</code>ï¼Œ<code>ensureUrl</code> è¿™ä¸ªå‡½æ•°æˆ‘ä»¬ä¹‹åä¼šä»‹ç»ã€‚</p><p>æ¥ç€åˆæ ¹æ® <code>current.matched</code> å’Œ <code>route.matched</code> æ‰§è¡Œäº† <code>resolveQueue</code> æ–¹æ³•è§£æå‡º 3 ä¸ªé˜Ÿåˆ—ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resolveQueue</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">current</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">next</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">updated</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">activated</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">deactivated</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">} {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> i</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">max</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">max</span><span style="color:#E1E4E8;">(current.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">, next.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">; i </span><span style="color:#F97583;">&lt;</span><span style="color:#E1E4E8;"> max; i</span><span style="color:#F97583;">++</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (current[i] </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> next[i]) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">break</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    updated: next.</span><span style="color:#B392F0;">slice</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, i),</span></span>
<span class="line"><span style="color:#E1E4E8;">    activated: next.</span><span style="color:#B392F0;">slice</span><span style="color:#E1E4E8;">(i),</span></span>
<span class="line"><span style="color:#E1E4E8;">    deactivated: current.</span><span style="color:#B392F0;">slice</span><span style="color:#E1E4E8;">(i)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å› ä¸º <code>route.matched</code> æ˜¯ä¸€ä¸ª <code>RouteRecord</code> çš„æ•°ç»„ï¼Œç”±äºè·¯å¾„æ˜¯ç”± <code>current</code> å˜å‘ <code>route</code>ï¼Œé‚£ä¹ˆå°±éå†å¯¹æ¯” 2 è¾¹çš„ <code>RouteRecord</code>ï¼Œæ‰¾åˆ°ä¸€ä¸ªä¸ä¸€æ ·çš„ä½ç½® <code>i</code>ï¼Œé‚£ä¹ˆ <code>next</code> ä¸­ä» 0 åˆ° <code>i</code> çš„ <code>RouteRecord</code> æ˜¯ä¸¤è¾¹éƒ½ä¸€æ ·ï¼Œåˆ™ä¸º <code>updated</code> çš„éƒ¨åˆ†ï¼›ä» <code>i</code> åˆ°æœ€åçš„ <code>RouteRecord</code> æ˜¯ <code>next</code> ç‹¬æœ‰çš„ï¼Œä¸º <code>activated</code> çš„éƒ¨åˆ†ï¼›è€Œ <code>current</code> ä¸­ä» <code>i</code> åˆ°æœ€åçš„ <code>RouteRecord</code> åˆ™æ²¡æœ‰äº†ï¼Œä¸º <code>deactivated</code> çš„éƒ¨åˆ†ã€‚</p><p>æ‹¿åˆ° <code>updated</code>ã€<code>activated</code>ã€<code>deactivated</code> 3 ä¸ª <code>ReouteRecord</code> æ•°ç»„åï¼Œæ¥ä¸‹æ¥å°±æ˜¯è·¯å¾„å˜æ¢åçš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ï¼Œæ‰§è¡Œä¸€ç³»åˆ—çš„é’©å­å‡½æ•°ã€‚</p><h2 id="å¯¼èˆªå®ˆå«" tabindex="-1">å¯¼èˆªå®ˆå« <a class="header-anchor" href="#å¯¼èˆªå®ˆå«" aria-label="Permalink to &quot;å¯¼èˆªå®ˆå«&quot;">â€‹</a></h2><p>å®˜æ–¹çš„è¯´æ³•å«å¯¼èˆªå®ˆå«ï¼Œå®é™…ä¸Šå°±æ˜¯å‘ç”Ÿåœ¨è·¯ç”±è·¯å¾„åˆ‡æ¢çš„æ—¶å€™ï¼Œæ‰§è¡Œçš„ä¸€ç³»åˆ—é’©å­å‡½æ•°ã€‚</p><p>æˆ‘ä»¬å…ˆä»æ•´ä½“ä¸Šçœ‹ä¸€ä¸‹è¿™äº›é’©å­å‡½æ•°æ‰§è¡Œçš„é€»è¾‘ï¼Œé¦–å…ˆæ„é€ ä¸€ä¸ªé˜Ÿåˆ— <code>queue</code>ï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ•°ç»„ï¼›ç„¶åå†å®šä¹‰ä¸€ä¸ªè¿­ä»£å™¨å‡½æ•° <code>iterator</code>ï¼›æœ€åå†æ‰§è¡Œ <code>runQueue</code> æ–¹æ³•æ¥æ‰§è¡Œè¿™ä¸ªé˜Ÿåˆ—ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ <code>runQueue</code> çš„å®šä¹‰ï¼Œåœ¨ <code>src/util/async.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">runQueue</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">queue</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">&gt;, </span><span style="color:#B392F0;">fn</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">, </span><span style="color:#B392F0;">cb</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">step</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (index </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> queue.</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (queue[index]) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">fn</span><span style="color:#E1E4E8;">(queue[index], () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">step</span><span style="color:#E1E4E8;">(index </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">step</span><span style="color:#E1E4E8;">(index </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">step</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è¿™æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„å¼‚æ­¥å‡½æ•°é˜Ÿåˆ—åŒ–æ‰§è¡Œçš„æ¨¡å¼ï¼Œ <code>queue</code> æ˜¯ä¸€ä¸ª <code>NavigationGuard</code> ç±»å‹çš„æ•°ç»„ï¼Œæˆ‘ä»¬å®šä¹‰äº† <code>step</code> å‡½æ•°ï¼Œæ¯æ¬¡æ ¹æ® <code>index</code> ä» <code>queue</code> ä¸­å–ä¸€ä¸ª <code>guard</code>ï¼Œç„¶åæ‰§è¡Œ <code>fn</code> å‡½æ•°ï¼Œå¹¶ä¸”æŠŠ <code>guard</code> ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªå‡½æ•°æ‰§è¡Œçš„æ—¶å€™å†é€’å½’æ‰§è¡Œ <code>step</code> å‡½æ•°ï¼Œå‰è¿›åˆ°ä¸‹ä¸€ä¸ªï¼Œæ³¨æ„è¿™é‡Œçš„ <code>fn</code> å°±æ˜¯æˆ‘ä»¬åˆšæ‰çš„ <code>iterator</code> å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å†å›åˆ° <code>iterator</code> å‡½æ•°çš„å®šä¹‰ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">iterator</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">hook</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">next</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.pending </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> route) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">hook</span><span style="color:#E1E4E8;">(route, current, (</span><span style="color:#FFAB70;">to</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isError</span><span style="color:#E1E4E8;">(to)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">ensureURL</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;string&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">        (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;object&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to.path </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;string&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to.name </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;string&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">        ))</span></span>
<span class="line"><span style="color:#E1E4E8;">      ) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> to </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;object&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> to.replace) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">(to)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">(e)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><code>iterator</code> å‡½æ•°é€»è¾‘å¾ˆç®€å•ï¼Œå®ƒå°±æ˜¯å»æ‰§è¡Œæ¯ä¸€ä¸ª å¯¼èˆªå®ˆå« <code>hook</code>ï¼Œå¹¶ä¼ å…¥ <code>route</code>ã€<code>current</code> å’ŒåŒ¿åå‡½æ•°ï¼Œè¿™äº›å‚æ•°å¯¹åº”æ–‡æ¡£ä¸­çš„ <code>to</code>ã€<code>from</code>ã€<code>next</code>ï¼Œå½“æ‰§è¡Œäº†åŒ¿åå‡½æ•°ï¼Œä¼šæ ¹æ®ä¸€äº›æ¡ä»¶æ‰§è¡Œ <code>abort</code> æˆ– <code>next</code>ï¼Œåªæœ‰æ‰§è¡Œ <code>next</code> çš„æ—¶å€™ï¼Œæ‰ä¼šå‰è¿›åˆ°ä¸‹ä¸€ä¸ªå¯¼èˆªå®ˆå«é’©å­å‡½æ•°ä¸­ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå®˜æ–¹æ–‡æ¡£ä¼šè¯´åªæœ‰æ‰§è¡Œ <code>next</code> æ–¹æ³•æ¥ <code>resolve</code> è¿™ä¸ªé’©å­å‡½æ•°ã€‚</p><p>é‚£ä¹ˆæœ€åæˆ‘ä»¬æ¥çœ‹ <code>queue</code> æ˜¯æ€ä¹ˆæ„é€ çš„ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">queue</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">&gt; </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [].</span><span style="color:#B392F0;">concat</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">extractLeaveGuards</span><span style="color:#E1E4E8;">(deactivated),</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.beforeHooks,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">extractUpdateHooks</span><span style="color:#E1E4E8;">(updated),</span></span>
<span class="line"><span style="color:#E1E4E8;">  activated.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">m</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> m.beforeEnter),</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">resolveAsyncComponents</span><span style="color:#E1E4E8;">(activated)</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>æŒ‰ç…§é¡ºåºå¦‚ä¸‹ï¼š</p><ol><li><p>åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ç¦»å¼€å®ˆå«ã€‚</p></li><li><p>è°ƒç”¨å…¨å±€çš„ <code>beforeEach</code> å®ˆå«ã€‚</p></li><li><p>åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ <code>beforeRouteUpdate</code> å®ˆå«</p></li><li><p>åœ¨æ¿€æ´»çš„è·¯ç”±é…ç½®é‡Œè°ƒç”¨ <code>beforeEnter</code>ã€‚</p></li><li><p>è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶ã€‚</p></li></ol><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ†åˆ«ä»‹ç»è¿™ 5 æ­¥çš„å®ç°ã€‚</p><p>ç¬¬ä¸€æ­¥æ˜¯é€šè¿‡æ‰§è¡Œ <code>extractLeaveGuards(deactivated)</code>ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ <code>extractLeaveGuards</code> çš„å®šä¹‰ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractLeaveGuards</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">deactivated</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractGuards</span><span style="color:#E1E4E8;">(deactivated, </span><span style="color:#9ECBFF;">&#39;beforeRouteLeave&#39;</span><span style="color:#E1E4E8;">, bindGuard, </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å®ƒå†…éƒ¨è°ƒç”¨äº† <code>extractGuards</code> çš„é€šç”¨æ–¹æ³•ï¼Œå¯ä»¥ä» <code>RouteRecord</code> æ•°ç»„ä¸­æå–å„ä¸ªé˜¶æ®µçš„å®ˆå«ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractGuards</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">records</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">name</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">bind</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">reverse</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">boolean</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">guards</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">flatMapComponents</span><span style="color:#E1E4E8;">(records, (</span><span style="color:#FFAB70;">def</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">instance</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">match</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">guard</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractGuard</span><span style="color:#E1E4E8;">(def, name)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (guard) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Array.</span><span style="color:#B392F0;">isArray</span><span style="color:#E1E4E8;">(guard)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> guard.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">guard</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(guard, instance, match, key))</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(guard, instance, match, key)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">flatten</span><span style="color:#E1E4E8;">(reverse </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> guards.</span><span style="color:#B392F0;">reverse</span><span style="color:#E1E4E8;">() </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> guards)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è¿™é‡Œç”¨åˆ°äº† <code>flatMapComponents</code> æ–¹æ³•å»ä» <code>records</code> ä¸­è·å–æ‰€æœ‰çš„å¯¼èˆªï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/util/resolve-components.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">flatMapComponents</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">matched</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">fn</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">flatten</span><span style="color:#E1E4E8;">(matched.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">m</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> Object.</span><span style="color:#B392F0;">keys</span><span style="color:#E1E4E8;">(m.components).</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fn</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      m.components[key],</span></span>
<span class="line"><span style="color:#E1E4E8;">      m.instances[key],</span></span>
<span class="line"><span style="color:#E1E4E8;">      m, key</span></span>
<span class="line"><span style="color:#E1E4E8;">    ))</span></span>
<span class="line"><span style="color:#E1E4E8;">  }))</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">flatten</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">arr</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt;)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">Array</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">prototype</span><span style="color:#E1E4E8;">.concat.</span><span style="color:#B392F0;">apply</span><span style="color:#E1E4E8;">([], arr)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>flatMapComponents</code> çš„ä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯ä» <code>matched</code> é‡Œè·å–åˆ°æ‰€æœ‰ç»„ä»¶çš„ <code>key</code>ï¼Œç„¶åè¿”å› <code>fn</code> å‡½æ•°æ‰§è¡Œçš„ç»“æœï¼Œ<code>flatten</code> ä½œç”¨æ˜¯æŠŠäºŒç»´æ•°ç»„æ‹å¹³æˆä¸€ç»´æ•°ç»„ã€‚</p><p>é‚£ä¹ˆå¯¹äº <code>extractGuards</code> ä¸­ <code>flatMapComponents</code> çš„è°ƒç”¨ï¼Œæ‰§è¡Œæ¯ä¸ª <code>fn</code> çš„æ—¶å€™ï¼Œé€šè¿‡ <code>extractGuard(def, name)</code> è·å–åˆ°ç»„ä»¶ä¸­å¯¹åº” <code>name</code> çš„å¯¼èˆªå®ˆå«ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractGuard</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">def</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Object</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> def </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;function&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    def </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> _Vue.</span><span style="color:#B392F0;">extend</span><span style="color:#E1E4E8;">(def)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> def.options[key]</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>è·å–åˆ° <code>guard</code> åï¼Œè¿˜ä¼šè°ƒç”¨ <code>bind</code> æ–¹æ³•æŠŠç»„ä»¶çš„å®ä¾‹ <code>instance</code> ä½œä¸ºå‡½æ•°æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ç»‘å®šåˆ° <code>guard</code> ä¸Šï¼Œ<code>bind </code> æ–¹æ³•çš„å¯¹åº”çš„æ˜¯ <code>bindGuard</code>ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bindGuard</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">guard</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">instance</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#B392F0;">_Vue</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (instance) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">boundRouteGuard</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> guard.</span><span style="color:#B392F0;">apply</span><span style="color:#E1E4E8;">(instance, </span><span style="color:#79B8FF;">arguments</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>é‚£ä¹ˆå¯¹äº <code>extractLeaveGuards(deactivated)</code> è€Œè¨€ï¼Œè·å–åˆ°çš„å°±æ˜¯æ‰€æœ‰å¤±æ´»ç»„ä»¶ä¸­å®šä¹‰çš„ <code>beforeRouteLeave</code> é’©å­å‡½æ•°ã€‚</p><p>ç¬¬äºŒæ­¥æ˜¯ <code>this.router.beforeHooks</code>ï¼Œåœ¨æˆ‘ä»¬çš„ <code>VueRouter</code> ç±»ä¸­å®šä¹‰äº† <code>beforeEach</code> æ–¹æ³•ï¼Œåœ¨ <code>src/index.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">beforeEach</span><span style="color:#E1E4E8;"> (fn: Function): Function {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">registerHook</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.beforeHooks, fn)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">registerHook</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">list</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">&gt;, </span><span style="color:#B392F0;">fn</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  list.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(fn)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">i</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> list.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(fn)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (i </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) list.</span><span style="color:#B392F0;">splice</span><span style="color:#E1E4E8;">(i, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>å½“ç”¨æˆ·ä½¿ç”¨ <code>router.beforeEach</code> æ³¨å†Œäº†ä¸€ä¸ªå…¨å±€å®ˆå«ï¼Œå°±ä¼šå¾€ <code>router.beforeHooks</code> æ·»åŠ ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œè¿™æ · <code>this.router.beforeHooks</code> è·å–çš„å°±æ˜¯ç”¨æˆ·æ³¨å†Œçš„å…¨å±€ <code>beforeEach</code> å®ˆå«ã€‚</p><p>ç¬¬ä¸‰æ­¥æ‰§è¡Œäº† <code>extractUpdateHooks(updated)</code>ï¼Œæ¥çœ‹ä¸€ä¸‹ <code>extractUpdateHooks</code> çš„å®šä¹‰ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractUpdateHooks</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">updated</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractGuards</span><span style="color:#E1E4E8;">(updated, </span><span style="color:#9ECBFF;">&#39;beforeRouteUpdate&#39;</span><span style="color:#E1E4E8;">, bindGuard)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å’Œ <code>extractLeaveGuards(deactivated)</code> ç±»ä¼¼ï¼Œ<code>extractUpdateHooks(updated)</code> è·å–åˆ°çš„å°±æ˜¯æ‰€æœ‰é‡ç”¨çš„ç»„ä»¶ä¸­å®šä¹‰çš„ <code>beforeRouteUpdate</code> é’©å­å‡½æ•°ã€‚</p><p>ç¬¬å››æ­¥æ˜¯æ‰§è¡Œ <code>activated.map(m =&gt; m.beforeEnter)</code>ï¼Œè·å–çš„æ˜¯åœ¨æ¿€æ´»çš„è·¯ç”±é…ç½®ä¸­å®šä¹‰çš„ <code>beforeEnter</code> å‡½æ•°ã€‚</p><p>ç¬¬äº”æ­¥æ˜¯æ‰§è¡Œ <code>resolveAsyncComponents(activated)</code> è§£æå¼‚æ­¥ç»„ä»¶ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ <code>resolveAsyncComponents</code> çš„å®šä¹‰ï¼Œåœ¨ <code>src/util/resolve-components.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resolveAsyncComponents</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">matched</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">to</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">from</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">next</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> hasAsync </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> pending </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> error </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">flatMapComponents</span><span style="color:#E1E4E8;">(matched, (</span><span style="color:#FFAB70;">def</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">match</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> def </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;function&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> def.cid </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        hasAsync </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">        pending</span><span style="color:#F97583;">++</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">resolve</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">once</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">resolvedDef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">isESModule</span><span style="color:#E1E4E8;">(resolvedDef)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            resolvedDef </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> resolvedDef.default</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">          def.resolved </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> resolvedDef </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;function&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> resolvedDef</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> _Vue.</span><span style="color:#B392F0;">extend</span><span style="color:#E1E4E8;">(resolvedDef)</span></span>
<span class="line"><span style="color:#E1E4E8;">          match.components[key] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> resolvedDef</span></span>
<span class="line"><span style="color:#E1E4E8;">          pending</span><span style="color:#F97583;">--</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (pending </span><span style="color:#F97583;">&lt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">reject</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">once</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">reason</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">msg</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">`Failed to resolve async component ${</span><span style="color:#E1E4E8;">key</span><span style="color:#9ECBFF;">}: ${</span><span style="color:#E1E4E8;">reason</span><span style="color:#9ECBFF;">}`</span></span>
<span class="line"><span style="color:#E1E4E8;">          p<wbr>rocess.env.</span><span style="color:#79B8FF;">NODE_ENV</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;production&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">warn</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, msg)</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">error) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            error </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isError</span><span style="color:#E1E4E8;">(reason)</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> reason</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Error</span><span style="color:#E1E4E8;">(msg)</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">(error)</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> res</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          res </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">def</span><span style="color:#E1E4E8;">(resolve, reject)</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">reject</span><span style="color:#E1E4E8;">(e)</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (res) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> res.then </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;function&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">            res.</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(resolve, reject)</span></span>
<span class="line"><span style="color:#E1E4E8;">          } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">comp</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> res.component</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (comp </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> comp.then </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;function&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">              comp.</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">(resolve, reject)</span></span>
<span class="line"><span style="color:#E1E4E8;">            }</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">hasAsync) </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><p><code>resolveAsyncComponents</code> è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¼èˆªå®ˆå«å‡½æ•°ï¼Œæœ‰æ ‡å‡†çš„ <code>to</code>ã€<code>from</code>ã€<code>next</code> å‚æ•°ã€‚å®ƒçš„å†…éƒ¨å®ç°å¾ˆç®€å•ï¼Œåˆ©ç”¨äº† <code>flatMapComponents</code> æ–¹æ³•ä» <code>matched</code> ä¸­è·å–åˆ°æ¯ä¸ªç»„ä»¶çš„å®šä¹‰ï¼Œåˆ¤æ–­å¦‚æœæ˜¯å¼‚æ­¥ç»„ä»¶ï¼Œåˆ™æ‰§è¡Œå¼‚æ­¥ç»„ä»¶åŠ è½½é€»è¾‘ï¼Œè¿™å—å’Œæˆ‘ä»¬ä¹‹å‰åˆ†æ <code>Vue</code> åŠ è½½å¼‚æ­¥ç»„ä»¶å¾ˆç±»ä¼¼ï¼ŒåŠ è½½æˆåŠŸåä¼šæ‰§è¡Œ <code> match.components[key] = resolvedDef</code> æŠŠè§£æå¥½çš„å¼‚æ­¥ç»„ä»¶æ”¾åˆ°å¯¹åº”çš„ <code>components</code> ä¸Šï¼Œå¹¶ä¸”æ‰§è¡Œ <code>next</code> å‡½æ•°ã€‚</p><p>è¿™æ ·åœ¨ <code>resolveAsyncComponents(activated)</code> è§£æå®Œæ‰€æœ‰æ¿€æ´»çš„å¼‚æ­¥ç»„ä»¶åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‹¿åˆ°è¿™ä¸€æ¬¡æ‰€æœ‰æ¿€æ´»çš„ç»„ä»¶ã€‚è¿™æ ·æˆ‘ä»¬åœ¨åšå®Œè¿™ 5 æ­¥ååˆåšäº†ä¸€äº›äº‹æƒ…ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">runQueue</span><span style="color:#E1E4E8;">(queue, iterator, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">postEnterCbs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isValid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">enterGuards</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractEnterGuards</span><span style="color:#E1E4E8;">(activated, postEnterCbs, isValid)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">queue</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> enterGuards.</span><span style="color:#B392F0;">concat</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.resolveHooks)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">runQueue</span><span style="color:#E1E4E8;">(queue, iterator, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.pending </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> route) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">abort</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.pending </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">onComplete</span><span style="color:#E1E4E8;">(route)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.app) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.app.</span><span style="color:#B392F0;">$nextTick</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        postEnterCbs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">cb</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">() })</span></span>
<span class="line"><span style="color:#E1E4E8;">      })</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ol start="6"><li><p>åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ <code>beforeRouteEnter</code>ã€‚</p></li><li><p>è°ƒç”¨å…¨å±€çš„ <code>beforeResolve</code> å®ˆå«ã€‚</p></li><li><p>è°ƒç”¨å…¨å±€çš„ <code>afterEach</code> é’©å­ã€‚</p></li></ol><p>å¯¹äºç¬¬å…­æ­¥æœ‰è¿™äº›ç›¸å…³çš„é€»è¾‘ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">postEnterCbs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> []</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isValid</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">enterGuards</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractEnterGuards</span><span style="color:#E1E4E8;">(activated, postEnterCbs, isValid)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractEnterGuards</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">activated</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">cbs</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">isValid</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">boolean</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#F97583;">?</span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extractGuards</span><span style="color:#E1E4E8;">(activated, </span><span style="color:#9ECBFF;">&#39;beforeRouteEnter&#39;</span><span style="color:#E1E4E8;">, (</span><span style="color:#FFAB70;">guard</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">match</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">key</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bindEnterGuard</span><span style="color:#E1E4E8;">(guard, match, key, cbs, isValid)</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">bindEnterGuard</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">guard</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">match</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RouteRecord</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">cbs</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Array</span><span style="color:#E1E4E8;">&lt;</span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">isValid</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">boolean</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NavigationGuard</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">routeEnterGuard</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">to</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">from</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">next</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">guard</span><span style="color:#E1E4E8;">(to, from, </span><span style="color:#FFAB70;">cb</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">(cb)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">typeof</span><span style="color:#E1E4E8;"> cb </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;function&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        cbs.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">poll</span><span style="color:#E1E4E8;">(cb, match.instances, key, isValid)</span></span>
<span class="line"><span style="color:#E1E4E8;">        })</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">poll</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">cb</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">instances</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Object</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">key</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">isValid</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">boolean</span></span>
<span class="line"><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (instances[key]) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">(instances[key])</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">isValid</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">poll</span><span style="color:#E1E4E8;">(cb, instances, key, isValid)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }, </span><span style="color:#79B8FF;">16</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p><code>extractEnterGuards</code> å‡½æ•°çš„å®ç°ä¹Ÿæ˜¯åˆ©ç”¨äº† <code>extractGuards</code> æ–¹æ³•æå–ç»„ä»¶ä¸­çš„ <code>beforeRouteEnter</code> å¯¼èˆªé’©å­å‡½æ•°ï¼Œå’Œä¹‹å‰ä¸åŒçš„æ˜¯ <code>bind</code> æ–¹æ³•çš„ä¸åŒã€‚æ–‡æ¡£ä¸­ç‰¹æ„å¼ºè°ƒäº† <code>beforeRouteEnter</code> é’©å­å‡½æ•°ä¸­æ˜¯æ‹¿ä¸åˆ°ç»„ä»¶å®ä¾‹çš„ï¼Œå› ä¸ºå½“å®ˆå«æ‰§è¡Œå‰ï¼Œç»„ä»¶å®ä¾‹è¿˜æ²¡è¢«åˆ›å»ºï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ ä¸€ä¸ªå›è°ƒç»™ <code>next</code> æ¥è®¿é—®ç»„ä»¶å®ä¾‹ã€‚åœ¨å¯¼èˆªè¢«ç¡®è®¤çš„æ—¶å€™æ‰§è¡Œå›è°ƒï¼Œå¹¶ä¸”æŠŠç»„ä»¶å®ä¾‹ä½œä¸ºå›è°ƒæ–¹æ³•çš„å‚æ•°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">beforeRouteEnter</span><span style="color:#E1E4E8;"> (to, from, next) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">next</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">vm</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// é€šè¿‡ `vm` è®¿é—®ç»„ä»¶å®ä¾‹</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>æ¥çœ‹ä¸€ä¸‹è¿™æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p><p>åœ¨ <code>bindEnterGuard</code> å‡½æ•°ä¸­ï¼Œè¿”å›çš„æ˜¯ <code>routeEnterGuard</code> å‡½æ•°ï¼Œæ‰€ä»¥åœ¨æ‰§è¡Œ <code>iterator</code> ä¸­çš„ <code>hook</code> å‡½æ•°çš„æ—¶å€™ï¼Œå°±ç›¸å½“äºæ‰§è¡Œ <code>routeEnterGuard</code> å‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šæ‰§è¡Œæˆ‘ä»¬å®šä¹‰çš„å¯¼èˆªå®ˆå« <code>guard</code> å‡½æ•°ï¼Œå¹¶ä¸”å½“è¿™ä¸ªå›è°ƒå‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œé¦–å…ˆæ‰§è¡Œ <code>next</code> å‡½æ•° <code>rersolve</code> å½“å‰å¯¼èˆªé’©å­ï¼Œç„¶åæŠŠå›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ç”¨ <code>cbs</code> æ”¶é›†èµ·æ¥ï¼Œå…¶å®å°±æ˜¯æ”¶é›†åˆ°å¤–é¢å®šä¹‰çš„ <code>postEnterCbs</code> ä¸­ï¼Œç„¶ååœ¨æœ€åä¼šæ‰§è¡Œï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.app) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.app.</span><span style="color:#B392F0;">$nextTick</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    postEnterCbs.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">cb</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { </span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">() })</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨æ ¹è·¯ç”±ç»„ä»¶é‡æ–°æ¸²æŸ“åï¼Œéå† <code>postEnterCbs</code> æ‰§è¡Œå›è°ƒï¼Œæ¯ä¸€ä¸ªå›è°ƒæ‰§è¡Œçš„æ—¶å€™ï¼Œå…¶å®æ˜¯æ‰§è¡Œ <code> poll(cb, match.instances, key, isValid)</code> æ–¹æ³•ï¼Œå› ä¸ºè€ƒè™‘åˆ°ä¸€äº›äº†è·¯ç”±ç»„ä»¶è¢«å¥— <code>transition</code> çµ„ä»¶åœ¨ä¸€äº›ç¼“åŠ¨æ¨¡å¼ä¸‹ä¸ä¸€å®šèƒ½æ‹¿åˆ°å®ä¾‹ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªè½®è¯¢æ–¹æ³•ä¸æ–­å»åˆ¤æ–­ï¼Œç›´åˆ°èƒ½è·å–åˆ°ç»„ä»¶å®ä¾‹ï¼Œå†å»è°ƒç”¨ <code>cb</code>ï¼Œå¹¶æŠŠç»„ä»¶å®ä¾‹ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°ä¸­èƒ½æ‹¿åˆ°ç»„ä»¶å®ä¾‹çš„åŸå› ã€‚</p><p>ç¬¬ä¸ƒæ­¥æ˜¯è·å– <code>this.router.resolveHooks</code>ï¼Œè¿™ä¸ªå’Œ <code>this.router.beforeHooks</code> çš„è·å–ç±»ä¼¼ï¼Œåœ¨æˆ‘ä»¬çš„ <code>VueRouter</code> ç±»ä¸­å®šä¹‰äº† <code>beforeResolve</code> æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">beforeResolve</span><span style="color:#E1E4E8;"> (fn: Function): Function {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">registerHook</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.resolveHooks, fn)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å½“ç”¨æˆ·ä½¿ç”¨ <code>router.beforeResolve</code> æ³¨å†Œäº†ä¸€ä¸ªå…¨å±€å®ˆå«ï¼Œå°±ä¼šå¾€ <code>router.resolveHooks</code> æ·»åŠ ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œè¿™æ · <code>this.router.resolveHooks</code> è·å–çš„å°±æ˜¯ç”¨æˆ·æ³¨å†Œçš„å…¨å±€ <code>beforeResolve</code> å®ˆå«ã€‚</p><p>ç¬¬å…«æ­¥æ˜¯åœ¨æœ€åæ‰§è¡Œäº† <code>onComplete(route)</code> åï¼Œä¼šæ‰§è¡Œ <code>this.updateRoute(route)</code> æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">updateRoute</span><span style="color:#E1E4E8;"> (route: Route) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">prev</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.cb </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">(route)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router.afterHooks.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">hook</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    hook </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">hook</span><span style="color:#E1E4E8;">(route, prev)</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>åŒæ ·åœ¨æˆ‘ä»¬çš„ <code>VueRouter</code> ç±»ä¸­å®šä¹‰äº† <code>afterEach</code> æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">afterEach</span><span style="color:#E1E4E8;"> (fn: Function): Function {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">registerHook</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.afterHooks, fn)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å½“ç”¨æˆ·ä½¿ç”¨ <code>router.afterEach</code> æ³¨å†Œäº†ä¸€ä¸ªå…¨å±€å®ˆå«ï¼Œå°±ä¼šå¾€ <code>router.afterHooks</code> æ·»åŠ ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œè¿™æ · <code>this.router.afterHooks</code> è·å–çš„å°±æ˜¯ç”¨æˆ·æ³¨å†Œçš„å…¨å±€ <code>afterHooks</code> å®ˆå«ã€‚</p><p>é‚£ä¹ˆè‡³æ­¤æˆ‘ä»¬æŠŠæ‰€æœ‰å¯¼èˆªå®ˆå«çš„æ‰§è¡Œåˆ†æå®Œæ¯•äº†ï¼Œæˆ‘ä»¬çŸ¥é“è·¯ç”±åˆ‡æ¢é™¤äº†æ‰§è¡Œè¿™äº›é’©å­å‡½æ•°ï¼Œä»è¡¨è±¡ä¸Šæœ‰ 2 ä¸ªåœ°æ–¹ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸€ä¸ªæ˜¯ url å‘ç”Ÿå˜åŒ–ï¼Œä¸€ä¸ªæ˜¯ç»„ä»¶å‘ç”Ÿå˜åŒ–ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«ä»‹ç»è¿™ä¸¤å—çš„å®ç°åŸç†ã€‚</p><h2 id="url" tabindex="-1">url <a class="header-anchor" href="#url" aria-label="Permalink to &quot;url&quot;">â€‹</a></h2><p>å½“æˆ‘ä»¬ç‚¹å‡» <code>router-link</code> çš„æ—¶å€™ï¼Œå®é™…ä¸Šæœ€ç»ˆä¼šæ‰§è¡Œ <code>router.push</code>ï¼Œå¦‚ä¸‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;"> (location: RawLocation, onComplete</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function, onAbort</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.history.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(location, onComplete, onAbort)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>this.history.push</code> å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ˜¯å­ç±»å®ç°çš„ï¼Œä¸åŒæ¨¡å¼ä¸‹è¯¥å‡½æ•°çš„å®ç°ç•¥æœ‰ä¸åŒï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¹³æ—¶ä½¿ç”¨æ¯”è¾ƒå¤šçš„ <code>hash</code> æ¨¡å¼è¯¥å‡½æ•°çš„å®ç°ï¼Œåœ¨ <code>src/history/hash.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;"> (location: RawLocation, onComplete</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function, onAbort</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#FFAB70;">current</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">fromRoute</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">transitionTo</span><span style="color:#E1E4E8;">(location, </span><span style="color:#FFAB70;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">pushHash</span><span style="color:#E1E4E8;">(route.fullPath)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">handleScroll</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router, route, fromRoute, </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    onComplete </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onComplete</span><span style="color:#E1E4E8;">(route)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, onAbort)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><code>push</code> å‡½æ•°ä¼šå…ˆæ‰§è¡Œ <code>this.transitionTo</code> åšè·¯å¾„åˆ‡æ¢ï¼Œåœ¨åˆ‡æ¢å®Œæˆçš„å›è°ƒå‡½æ•°ä¸­ï¼Œæ‰§è¡Œ <code>pushHash</code> å‡½æ•°ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">pushHash</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">path</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (supportsPushState) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">pushState</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">getUrl</span><span style="color:#E1E4E8;">(path))</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    window.location.hash </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> path</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><code>supportsPushState</code> çš„å®šä¹‰åœ¨ <code>src/util/push-state.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">supportsPushState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> inBrowser </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ua</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.navigator.userAgent</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    (ua.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Android 2.&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> ua.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Android 4.0&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">    ua.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Mobile Safari&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">    ua.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Chrome&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span></span>
<span class="line"><span style="color:#E1E4E8;">    ua.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;Windows Phone&#39;</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span></span>
<span class="line"><span style="color:#E1E4E8;">  ) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> window.history </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;pushState&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> window.history</span></span>
<span class="line"><span style="color:#E1E4E8;">})()</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>å¦‚æœæ”¯æŒçš„è¯ï¼Œåˆ™è·å–å½“å‰å®Œæ•´çš„ <code>url</code>ï¼Œæ‰§è¡Œ <code>pushState</code> æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">pushState</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">url</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">replace</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">boolean</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">saveScrollPosition</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">history</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.history</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (replace) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      history.</span><span style="color:#B392F0;">replaceState</span><span style="color:#E1E4E8;">({ key: _key }, </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">, url)</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      _key </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">genKey</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">      history.</span><span style="color:#B392F0;">pushState</span><span style="color:#E1E4E8;">({ key: _key }, </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">, url)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    window.location[replace </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;replace&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;assign&#39;</span><span style="color:#E1E4E8;">](url)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>pushState</code> ä¼šè°ƒç”¨æµè§ˆå™¨åŸç”Ÿçš„ <code>history</code> çš„ <code>pushState</code> æ¥å£æˆ–è€… <code>replaceState</code> æ¥å£ï¼Œæ›´æ–°æµè§ˆå™¨çš„ url åœ°å€ï¼Œå¹¶æŠŠå½“å‰ url å‹å…¥å†å²æ ˆä¸­ã€‚</p><p>ç„¶ååœ¨ <code>history</code> çš„åˆå§‹åŒ–ä¸­ï¼Œä¼šè®¾ç½®ä¸€ä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å†å²æ ˆçš„å˜åŒ–ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">setupListeners</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">expectScroll</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> router.options.scrollBehavior</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">supportsScroll</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> supportsPushState </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> expectScroll</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (supportsScroll) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setupScroll</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  window.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(supportsPushState </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;popstate&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;hashchange&#39;</span><span style="color:#E1E4E8;">, () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">current</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#B392F0;">ensureSlash</span><span style="color:#E1E4E8;">()) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">transitionTo</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">getHash</span><span style="color:#E1E4E8;">(), </span><span style="color:#FFAB70;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (supportsScroll) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">handleScroll</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.router, route, current, </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">supportsPushState) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">replaceHash</span><span style="color:#E1E4E8;">(route.fullPath)</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>å½“ç‚¹å‡»æµè§ˆå™¨è¿”å›æŒ‰é’®çš„æ—¶å€™ï¼Œå¦‚æœå·²ç»æœ‰ url è¢«å‹å…¥å†å²æ ˆï¼Œåˆ™ä¼šè§¦å‘ <code>popstate</code> äº‹ä»¶ï¼Œç„¶åæ‹¿åˆ°å½“å‰è¦è·³è½¬çš„ <code>hash</code>ï¼Œæ‰§è¡Œ <code>transtionTo</code> æ–¹æ³•åšä¸€æ¬¡è·¯å¾„è½¬æ¢ã€‚</p><p>åŒå­¦ä»¬åœ¨ä½¿ç”¨ Vue-Router å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œæ‰“å¼€è°ƒè¯•é¡µé¢ <code>http://localhost:8080</code> åä¼šè‡ªåŠ¨æŠŠ url ä¿®æ”¹ä¸º <code>http://localhost:8080/#/</code>ï¼Œè¿™æ˜¯æ€ä¹ˆåšåˆ°å‘¢ï¼ŸåŸæ¥åœ¨å®ä¾‹åŒ– <code>HashHistory</code> çš„æ—¶å€™ï¼Œæ„é€ å‡½æ•°ä¼šæ‰§è¡Œ <code>ensureSlash()</code> æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ensureSlash</span><span style="color:#E1E4E8;"> ()</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">boolean</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">path</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getHash</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (path.</span><span style="color:#B392F0;">charAt</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">replaceHash</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> path)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getHash</span><span style="color:#E1E4E8;"> ()</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// We can&#39;t use window.location.hash here because it&#39;s not</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// consistent across browsers - Firefox will pre-decode it!</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">href</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.location.href</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">index</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> href.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> index </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> href.</span><span style="color:#B392F0;">slice</span><span style="color:#E1E4E8;">(index </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getUrl</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">path</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">href</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.location.href</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">i</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> href.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">base</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">&gt;=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> href.</span><span style="color:#B392F0;">slice</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, i) </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> href</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">`${</span><span style="color:#E1E4E8;">base</span><span style="color:#9ECBFF;">}#${</span><span style="color:#E1E4E8;">path</span><span style="color:#9ECBFF;">}`</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">replaceHash</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">path</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (supportsPushState) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">replaceState</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">getUrl</span><span style="color:#E1E4E8;">(path))</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    window.location.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">getUrl</span><span style="color:#E1E4E8;">(path))</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">replaceState</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">url</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">pushState</span><span style="color:#E1E4E8;">(url, </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>è¿™ä¸ªæ—¶å€™ <code>path</code> ä¸ºç©ºï¼Œæ‰€ä»¥æ‰§è¡Œ <code>replaceHash(&#39;/&#39; + path)</code>ï¼Œç„¶åå†…éƒ¨ä¼šæ‰§è¡Œä¸€æ¬¡ <code>getUrl</code>ï¼Œè®¡ç®—å‡ºæ¥çš„æ–°çš„ <code>url</code> ä¸º <code>http://localhost:8080/#/</code>ï¼Œæœ€ç»ˆä¼šæ‰§è¡Œ <code>pushState(url, true)</code>ï¼Œè¿™å°±æ˜¯ url ä¼šæ”¹å˜çš„åŸå› ã€‚</p><h2 id="ç»„ä»¶" tabindex="-1">ç»„ä»¶ <a class="header-anchor" href="#ç»„ä»¶" aria-label="Permalink to &quot;ç»„ä»¶&quot;">â€‹</a></h2><p>è·¯ç”±æœ€ç»ˆçš„æ¸²æŸ“ç¦»ä¸å¼€ç»„ä»¶ï¼ŒVue-Router å†…ç½®äº† <code>&lt;router-view&gt;</code> ç»„ä»¶ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/components/view.js</code> ä¸­ã€‚</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&#39;RouterView&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  functional: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  props: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: String,</span></span>
<span class="line"><span style="color:#E1E4E8;">      default: </span><span style="color:#9ECBFF;">&#39;default&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;">, { </span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">children</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">parent</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    data.routerView </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">h</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> parent.$createElement</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">name</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> props.name</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> parent.$route</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">cache</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> parent._routerViewCache </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> (parent._routerViewCache </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> depth </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> inactive </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (parent </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> parent._routerRoot </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> parent) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (parent.$vnode </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> parent.$vnode.data.routerView) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        depth</span><span style="color:#F97583;">++</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (parent._inactive) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        inactive </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      parent </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> parent.$parent</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    data.routerViewDepth </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> depth</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (inactive) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">h</span><span style="color:#E1E4E8;">(cache[name], data, children)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">matched</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> route.matched[depth]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">matched) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      cache[name] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">h</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">component</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cache[name] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matched.components[name]</span></span>
<span class="line"><span style="color:#E1E4E8;">   </span></span>
<span class="line"><span style="color:#E1E4E8;">    data.</span><span style="color:#B392F0;">registerRouteInstance</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">vm</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">val</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {     </span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">current</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matched.instances[name]</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">        (val </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> current </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> vm) </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">        (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">val </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> current </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> vm)</span></span>
<span class="line"><span style="color:#E1E4E8;">      ) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        matched.instances[name] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> val</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span></span>
<span class="line"><span style="color:#E1E4E8;">    ;(data.hook </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> (data.hook </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {})).</span><span style="color:#B392F0;">prepatch</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">_</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">vnode</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      matched.instances[name] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> vnode.componentInstance</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> propsToPass </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> data.props </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resolveProps</span><span style="color:#E1E4E8;">(route, matched.props </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> matched.props[name])</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (propsToPass) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      propsToPass </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> data.props </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extend</span><span style="color:#E1E4E8;">({}, propsToPass)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">attrs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> data.attrs </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> data.attrs </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">key</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> propsToPass) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">component.props </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">(key </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> component.props)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          attrs[key] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> propsToPass[key]</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">delete</span><span style="color:#E1E4E8;"> propsToPass[key]</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">h</span><span style="color:#E1E4E8;">(component, data, children)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><p><code>&lt;router-view&gt;</code> æ˜¯ä¸€ä¸ª <code>functional</code> ç»„ä»¶ï¼Œå®ƒçš„æ¸²æŸ“ä¹Ÿæ˜¯ä¾èµ– <code>render</code> å‡½æ•°ï¼Œé‚£ä¹ˆ <code>&lt;router-view&gt;</code> å…·ä½“åº”è¯¥æ¸²æŸ“ä»€ä¹ˆç»„ä»¶å‘¢ï¼Œé¦–å…ˆè·å–å½“å‰çš„è·¯å¾„ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> parent.$route</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>æˆ‘ä»¬ä¹‹å‰åˆ†æè¿‡ï¼Œåœ¨ <code>src/install.js</code> ä¸­ï¼Œæˆ‘ä»¬ç»™ Vue çš„åŸå‹ä¸Šå®šä¹‰äº† <code>$route</code>ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">Object.</span><span style="color:#B392F0;">defineProperty</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">Vue</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">prototype</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;$route&#39;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;"> () { </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._routerRoot._route }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶ååœ¨ <code>VueRouter</code> çš„å®ä¾‹æ‰§è¡Œ <code>router.init</code> æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹é€»è¾‘ï¼Œå®šä¹‰åœ¨ <code>src/index.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">history.</span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.apps.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">app</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    app._route </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"><span style="color:#E1E4E8;">  })</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>è€Œ <code>history.listen</code> æ–¹æ³•å®šä¹‰åœ¨ <code>src/history/base.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;"> (cb: Function) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.cb </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cb</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç„¶ååœ¨ <code>updateRoute</code> çš„æ—¶å€™æ‰§è¡Œ <code>this.cb</code>ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">updateRoute</span><span style="color:#E1E4E8;"> (route: Route) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//. ..</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.current </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.cb </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">cb</span><span style="color:#E1E4E8;">(route)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰§è¡Œ <code>transitionTo</code> æ–¹æ³•æœ€åæ‰§è¡Œ <code>updateRoute</code> çš„æ—¶å€™ä¼šæ‰§è¡Œå›è°ƒï¼Œç„¶åä¼šæ›´æ–° <code>this.apps</code> ä¿å­˜çš„ç»„ä»¶å®ä¾‹çš„ <code>_route</code> å€¼ï¼Œ<code>this.apps</code> æ•°ç»„ä¿å­˜çš„å®ä¾‹çš„ç‰¹ç‚¹éƒ½æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼ å…¥äº† <code>router</code> é…ç½®é¡¹ï¼Œä¸€èˆ¬çš„åœºæ™¯æ•°ç»„åªä¼šä¿å­˜æ ¹ Vue å®ä¾‹ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨ <code>new Vue</code> ä¼ å…¥äº† <code>router</code> å®ä¾‹ã€‚<code>$route</code> æ˜¯å®šä¹‰åœ¨ <code>Vue.prototype</code> ä¸Šã€‚æ¯ä¸ªç»„ä»¶å®ä¾‹è®¿é—® <code>$route</code> å±æ€§ï¼Œå°±æ˜¯è®¿é—®æ ¹å®ä¾‹çš„ <code>_route</code>ï¼Œä¹Ÿå°±æ˜¯å½“å‰çš„è·¯ç”±çº¿è·¯ã€‚</p><p><code>&lt;router-view&gt;</code> æ˜¯æ”¯æŒåµŒå¥—çš„ï¼Œå›åˆ° <code>render</code> å‡½æ•°ï¼Œå…¶ä¸­å®šä¹‰äº† <code>depth</code> çš„æ¦‚å¿µï¼Œå®ƒè¡¨ç¤º <code>&lt;router-view&gt;</code> åµŒå¥—çš„æ·±åº¦ã€‚æ¯ä¸ª <code>&lt;router-view&gt;</code> åœ¨æ¸²æŸ“çš„æ—¶å€™ï¼Œæ‰§è¡Œå¦‚ä¸‹é€»è¾‘ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">data.routerView </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#F97583;">while</span><span style="color:#E1E4E8;"> (parent </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> parent._routerRoot </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> parent) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (parent.$vnode </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> parent.$vnode.data.routerView) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    depth</span><span style="color:#F97583;">++</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (parent._inactive) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    inactive </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  parent </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> parent.$parent</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">matched</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> route.matched[depth]</span></span>
<span class="line"><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">component</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> cache[name] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matched.components[name]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>parent._routerRoot</code> è¡¨ç¤ºçš„æ˜¯æ ¹ Vue å®ä¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå¾ªç¯å°±æ˜¯ä»å½“å‰çš„ <code>&lt;router-view&gt;</code> çš„çˆ¶èŠ‚ç‚¹å‘ä¸Šæ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°æ ¹ Vue å®ä¾‹ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ï¼Œå¦‚æœç¢°åˆ°äº†çˆ¶èŠ‚ç‚¹ä¹Ÿæ˜¯ <code>&lt;router-view&gt;</code> çš„æ—¶å€™ï¼Œè¯´æ˜ <code>&lt;router-view&gt;</code> æœ‰åµŒå¥—çš„æƒ…å†µï¼Œ<code>depth++</code>ã€‚éå†å®Œæˆåï¼Œæ ¹æ®å½“å‰çº¿è·¯åŒ¹é…çš„è·¯å¾„å’Œ <code>depth</code> æ‰¾åˆ°å¯¹åº”çš„ <code>RouteRecord</code>ï¼Œè¿›è€Œæ‰¾åˆ°è¯¥æ¸²æŸ“çš„ç»„ä»¶ã€‚</p><p>é™¤äº†æ‰¾åˆ°äº†åº”è¯¥æ¸²æŸ“çš„ç»„ä»¶ï¼Œè¿˜å®šä¹‰äº†ä¸€ä¸ªæ³¨å†Œè·¯ç”±å®ä¾‹çš„æ–¹æ³•ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">data.</span><span style="color:#B392F0;">registerRouteInstance</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">vm</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">val</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {     </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">current</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> matched.instances[name]</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    (val </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> current </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> vm) </span><span style="color:#F97583;">||</span></span>
<span class="line"><span style="color:#E1E4E8;">    (</span><span style="color:#F97583;">!</span><span style="color:#E1E4E8;">val </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> current </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> vm)</span></span>
<span class="line"><span style="color:#E1E4E8;">  ) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    matched.instances[name] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> val</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç»™ <code>vnode</code> çš„ <code>data</code> å®šä¹‰äº† <code>registerRouteInstance</code> æ–¹æ³•ï¼Œåœ¨ <code>src/install.js</code> ä¸­ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨è¯¥æ–¹æ³•å»æ³¨å†Œè·¯ç”±çš„å®ä¾‹ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">registerInstance</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">vm</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">callVal</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> vm.$options._parentVnode</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">isDef</span><span style="color:#E1E4E8;">(i) </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isDef</span><span style="color:#E1E4E8;">(i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> i.data) </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isDef</span><span style="color:#E1E4E8;">(i </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> i.registerRouteInstance)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">i</span><span style="color:#E1E4E8;">(vm, callVal)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">Vue.</span><span style="color:#B392F0;">mixin</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">beforeCreate</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">registerInstance</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">destroyed</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">registerInstance</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>åœ¨æ··å…¥çš„ <code>beforeCreate</code> é’©å­å‡½æ•°ä¸­ï¼Œä¼šæ‰§è¡Œ <code>registerInstance</code> æ–¹æ³•ï¼Œè¿›è€Œæ‰§è¡Œ <code>render</code> å‡½æ•°ä¸­å®šä¹‰çš„ <code>registerRouteInstance</code> æ–¹æ³•ï¼Œä»è€Œç»™ <code>matched.instances[name]</code> èµ‹å€¼å½“å‰ç»„ä»¶çš„ <code>vm</code> å®ä¾‹ã€‚</p><p><code>render</code> å‡½æ•°çš„æœ€åæ ¹æ® <code>component</code> æ¸²æŸ“å‡ºå¯¹åº”çš„ç»„ä»¶ <code>vonde</code>ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">h</span><span style="color:#E1E4E8;">(component, data, children)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é‚£ä¹ˆå½“æˆ‘ä»¬æ‰§è¡Œ <code>transitionTo</code> æ¥æ›´æ”¹è·¯ç”±çº¿è·¯åï¼Œç»„ä»¶æ˜¯å¦‚ä½•é‡æ–°æ¸²æŸ“çš„å‘¢ï¼Ÿåœ¨æˆ‘ä»¬æ··å…¥çš„ <code>beforeCreate</code> é’©å­å‡½æ•°ä¸­æœ‰è¿™ä¹ˆä¸€æ®µé€»è¾‘ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#E1E4E8;">Vue.</span><span style="color:#B392F0;">mixin</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">beforeCreate</span><span style="color:#E1E4E8;"> () {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">isDef</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$options.router)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      Vue.util.</span><span style="color:#B392F0;">defineReactive</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;_route&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">._router.history.current)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç”±äºæˆ‘ä»¬æŠŠæ ¹ Vue å®ä¾‹çš„ <code>_route</code> å±æ€§å®šä¹‰æˆå“åº”å¼çš„ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ª <code>&lt;router-view&gt;</code> æ‰§è¡Œ <code>render</code> å‡½æ•°çš„æ—¶å€™ï¼Œéƒ½ä¼šè®¿é—® <code>parent.$route</code>ï¼Œå¦‚æˆ‘ä»¬ä¹‹å‰åˆ†æä¼šè®¿é—® <code>this._routerRoot._route</code>ï¼Œè§¦å‘äº†å®ƒçš„ <code>getter</code>ï¼Œç›¸å½“äº <code>&lt;router-view&gt;</code> å¯¹å®ƒæœ‰ä¾èµ–ï¼Œç„¶åå†æ‰§è¡Œå®Œ <code>transitionTo</code> åï¼Œä¿®æ”¹ <code>app._route</code> çš„æ—¶å€™ï¼Œåˆè§¦å‘äº†<code>setter</code>ï¼Œå› æ­¤ä¼šé€šçŸ¥ <code>&lt;router-view&gt;</code> çš„æ¸²æŸ“ <code>watcher</code> æ›´æ–°ï¼Œé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚</p><p>Vue-Router è¿˜å†…ç½®äº†å¦ä¸€ä¸ªç»„ä»¶ <code>&lt;router-link&gt;</code>ï¼Œ å®ƒæ”¯æŒç”¨æˆ·åœ¨å…·æœ‰è·¯ç”±åŠŸèƒ½çš„åº”ç”¨ä¸­ï¼ˆç‚¹å‡»ï¼‰å¯¼èˆªã€‚ é€šè¿‡ <code>to</code> å±æ€§æŒ‡å®šç›®æ ‡åœ°å€ï¼Œé»˜è®¤æ¸²æŸ“æˆå¸¦æœ‰æ­£ç¡®é“¾æ¥çš„ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡é…ç½® <code>tag</code> å±æ€§ç”Ÿæˆåˆ«çš„æ ‡ç­¾ã€‚å¦å¤–ï¼Œå½“ç›®æ ‡è·¯ç”±æˆåŠŸæ¿€æ´»æ—¶ï¼Œé“¾æ¥å…ƒç´ è‡ªåŠ¨è®¾ç½®ä¸€ä¸ªè¡¨ç¤ºæ¿€æ´»çš„ CSS ç±»åã€‚</p><p><code>&lt;router-link&gt;</code> æ¯”èµ·å†™æ­»çš„ <code>&lt;a href=&quot;...&quot;&gt;</code> ä¼šå¥½ä¸€äº›ï¼Œç†ç”±å¦‚ä¸‹ï¼š</p><p>æ— è®ºæ˜¯ HTML5 <code>history</code> æ¨¡å¼è¿˜æ˜¯ <code>hash</code> æ¨¡å¼ï¼Œå®ƒçš„è¡¨ç°è¡Œä¸ºä¸€è‡´ï¼Œæ‰€ä»¥ï¼Œå½“ä½ è¦åˆ‡æ¢è·¯ç”±æ¨¡å¼ï¼Œæˆ–è€…åœ¨ IE9 é™çº§ä½¿ç”¨ <code>hash</code> æ¨¡å¼ï¼Œæ— é¡»ä½œä»»ä½•å˜åŠ¨ã€‚</p><p>åœ¨ HTML5 <code>history</code> æ¨¡å¼ä¸‹ï¼Œ<code>router-link</code> ä¼šå®ˆå«ç‚¹å‡»äº‹ä»¶ï¼Œè®©æµè§ˆå™¨ä¸å†é‡æ–°åŠ è½½é¡µé¢ã€‚</p><p>å½“ä½ åœ¨ HTML5 <code>history</code> æ¨¡å¼ä¸‹ä½¿ç”¨ <code>base</code> é€‰é¡¹ä¹‹åï¼Œæ‰€æœ‰çš„ to å±æ€§éƒ½ä¸éœ€è¦å†™ï¼ˆåŸºè·¯å¾„ï¼‰äº†ã€‚</p><p>é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥åˆ†æå®ƒçš„å®ç°ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/components/link.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&#39;RouterLink&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  props: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    to: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: toTypes,</span></span>
<span class="line"><span style="color:#E1E4E8;">      required: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    tag: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: String,</span></span>
<span class="line"><span style="color:#E1E4E8;">      default: </span><span style="color:#9ECBFF;">&#39;a&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    exact: Boolean,</span></span>
<span class="line"><span style="color:#E1E4E8;">    append: Boolean,</span></span>
<span class="line"><span style="color:#E1E4E8;">    replace: Boolean,</span></span>
<span class="line"><span style="color:#E1E4E8;">    activeClass: String,</span></span>
<span class="line"><span style="color:#E1E4E8;">    exactActiveClass: String,</span></span>
<span class="line"><span style="color:#E1E4E8;">    event: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: eventTypes,</span></span>
<span class="line"><span style="color:#E1E4E8;">      default: </span><span style="color:#9ECBFF;">&#39;click&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">h</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Function</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$router</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">current</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$route</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">location</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">route</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">href</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> router.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.to, current, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.append)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">classes</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">globalActiveClass</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> router.options.linkActiveClass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">globalExactActiveClass</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> router.options.linkExactActiveClass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">activeClassFallback</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> globalActiveClass </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;router-link-active&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> globalActiveClass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">exactActiveClassFallback</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> globalExactActiveClass </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;router-link-exact-active&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> globalExactActiveClass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">activeClass</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.activeClass </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> activeClassFallback</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.activeClass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">exactActiveClass</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.exactActiveClass </span><span style="color:#F97583;">==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> exactActiveClassFallback</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.exactActiveClass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">compareTarget</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> location.path</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createRoute</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, location, </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, router)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> route</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    classes[exactActiveClass] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isSameRoute</span><span style="color:#E1E4E8;">(current, compareTarget)</span></span>
<span class="line"><span style="color:#E1E4E8;">    classes[activeClass] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.exact</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> classes[exactActiveClass]</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isIncludedRoute</span><span style="color:#E1E4E8;">(current, compareTarget)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handler</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">guardEvent</span><span style="color:#E1E4E8;">(e)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.replace) {</span></span>
<span class="line"><span style="color:#E1E4E8;">          router.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(location)</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          router.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(location)</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> { click: guardEvent }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (Array.</span><span style="color:#B392F0;">isArray</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.event)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.event.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { on[e] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> handler })</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      on[</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.event] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> handler</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">data</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">any</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      class: classes</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.tag </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      data.on </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> on</span></span>
<span class="line"><span style="color:#E1E4E8;">      data.attrs </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> { href }</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">a</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">findAnchor</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$slots.default)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (a) {</span></span>
<span class="line"><span style="color:#E1E4E8;">        a.isStatic </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">extend</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> _Vue.util.extend</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">aData</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> a.data </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extend</span><span style="color:#E1E4E8;">({}, a.data)</span></span>
<span class="line"><span style="color:#E1E4E8;">        aData.on </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> on</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">aAttrs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> a.data.attrs </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">extend</span><span style="color:#E1E4E8;">({}, a.data.attrs)</span></span>
<span class="line"><span style="color:#E1E4E8;">        aAttrs.href </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> href</span></span>
<span class="line"><span style="color:#E1E4E8;">      } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        data.on </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> on</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">h</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.tag, data, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$slots.default)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br></div></div><p><code>&lt;router-link&gt;</code> æ ‡ç­¾çš„æ¸²æŸ“ä¹Ÿæ˜¯åŸºäº <code>render</code> å‡½æ•°ï¼Œå®ƒé¦–å…ˆåšäº†è·¯ç”±è§£æï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">router</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$router</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">current</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.$route</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">location</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">route</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">href</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> router.</span><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.to, current, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.append)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>router.resolve</code> æ˜¯ <code>VueRouter</code> çš„å®ä¾‹æ–¹æ³•ï¼Œå®ƒçš„å®šä¹‰åœ¨ <code>src/index.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">resolve</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  to: RawLocation,</span></span>
<span class="line"><span style="color:#E1E4E8;">  current</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Route,</span></span>
<span class="line"><span style="color:#E1E4E8;">  append</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> boolean</span></span>
<span class="line"><span style="color:#E1E4E8;">): {</span></span>
<span class="line"><span style="color:#E1E4E8;">  location: Location,</span></span>
<span class="line"><span style="color:#E1E4E8;">  route: Route,</span></span>
<span class="line"><span style="color:#E1E4E8;">  href: string,</span></span>
<span class="line"><span style="color:#E1E4E8;">  normalizedTo: Location,</span></span>
<span class="line"><span style="color:#E1E4E8;">  resolved: Route</span></span>
<span class="line"><span style="color:#E1E4E8;">} {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">normalizeLocation</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    to,</span></span>
<span class="line"><span style="color:#E1E4E8;">    current </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.history.current,</span></span>
<span class="line"><span style="color:#E1E4E8;">    append,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span></span>
<span class="line"><span style="color:#E1E4E8;">  )</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">route</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">match</span><span style="color:#E1E4E8;">(location, current)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">fullPath</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> route.redirectedFrom </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> route.fullPath</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">base</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.history.base</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">href</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHref</span><span style="color:#E1E4E8;">(base, fullPath, </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.mode)</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    location,</span></span>
<span class="line"><span style="color:#E1E4E8;">    route,</span></span>
<span class="line"><span style="color:#E1E4E8;">    href,</span></span>
<span class="line"><span style="color:#E1E4E8;">    normalizedTo: location,</span></span>
<span class="line"><span style="color:#E1E4E8;">    resolved: route</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createHref</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">base</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">fullPath</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">string</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">mode</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">var</span><span style="color:#E1E4E8;"> path </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> mode </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;hash&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;#&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> fullPath </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> fullPath</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> base </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">cleanPath</span><span style="color:#E1E4E8;">(base </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> path) </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> path</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>å®ƒå…ˆè§„èŒƒç”Ÿæˆç›®æ ‡ <code>location</code>ï¼Œå†æ ¹æ® <code>location</code> å’Œ <code>match</code> é€šè¿‡ <code>this.match</code> æ–¹æ³•è®¡ç®—ç”Ÿæˆç›®æ ‡è·¯å¾„ <code>route</code>ï¼Œç„¶åå†æ ¹æ® <code>base</code>ã€<code>fullPath</code> å’Œ <code>this.mode</code> é€šè¿‡ <code>createHref</code> æ–¹æ³•è®¡ç®—å‡ºæœ€ç»ˆè·³è½¬çš„ <code>href</code>ã€‚</p><p>è§£æå®Œ <code>router</code> è·å¾—ç›®æ ‡ <code>location</code>ã€<code>route</code>ã€<code>href</code> åï¼Œæ¥ä¸‹æ¥å¯¹ <code>exactActiveClass</code> å’Œ <code>activeClass</code> åšå¤„ç†ï¼Œå½“é…ç½® <code>exact</code> ä¸º true çš„æ—¶å€™ï¼Œåªæœ‰å½“ç›®æ ‡è·¯å¾„å’Œå½“å‰è·¯å¾„å®Œå…¨åŒ¹é…çš„æ—¶å€™ï¼Œä¼šæ·»åŠ  <code>exactActiveClass</code>ï¼›è€Œå½“ç›®æ ‡è·¯å¾„åŒ…å«å½“å‰è·¯å¾„çš„æ—¶å€™ï¼Œä¼šæ·»åŠ  <code>activeClass</code>ã€‚</p><p>æ¥ç€åˆ›å»ºäº†ä¸€ä¸ªå®ˆå«å‡½æ•° ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handler</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#B392F0;">guardEvent</span><span style="color:#E1E4E8;">(e)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.replace) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      router.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(location)</span></span>
<span class="line"><span style="color:#E1E4E8;">    } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      router.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(location)</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">guardEvent</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (e.metaKey </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> e.altKey </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> e.ctrlKey </span><span style="color:#F97583;">||</span><span style="color:#E1E4E8;"> e.shiftKey) </span><span style="color:#F97583;">return</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (e.defaultPrevented) </span><span style="color:#F97583;">return</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (e.button </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">undefined</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> e.button </span><span style="color:#F97583;">!==</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (e.currentTarget </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> e.currentTarget.getAttribute) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">target</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.currentTarget.</span><span style="color:#B392F0;">getAttribute</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;target&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">\b</span><span style="color:#DBEDFF;">_blank</span><span style="color:#F97583;">\b</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">test</span><span style="color:#E1E4E8;">(target)) </span><span style="color:#F97583;">return</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (e.preventDefault) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    e.</span><span style="color:#B392F0;">preventDefault</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">on</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> { click: guardEvent }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (Array.</span><span style="color:#B392F0;">isArray</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.event)) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.event.</span><span style="color:#B392F0;">forEach</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> { on[e] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> handler })</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    on[</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.event] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> handler</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>æœ€ç»ˆä¼šç›‘å¬ç‚¹å‡»äº‹ä»¶æˆ–è€…å…¶å®ƒå¯ä»¥é€šè¿‡ <code>prop</code> ä¼ å…¥çš„äº‹ä»¶ç±»å‹ï¼Œæ‰§è¡Œ <code>hanlder</code> å‡½æ•°ï¼Œæœ€ç»ˆæ‰§è¡Œ <code>router.push</code> æˆ–è€… <code>router.replace</code> å‡½æ•°ï¼Œå®ƒä»¬çš„å®šä¹‰åœ¨ <code>src/index.js</code> ä¸­ï¼š</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark"><code><span class="line"><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;"> (location: RawLocation, onComplete</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function, onAbort</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.history.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(location, onComplete, onAbort)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;"> (location: RawLocation, onComplete</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function, onAbort</span><span style="color:#F97583;">?:</span><span style="color:#E1E4E8;"> Function) {</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.history.</span><span style="color:#B392F0;">replace</span><span style="color:#E1E4E8;">(location, onComplete, onAbort)</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å®é™…ä¸Šå°±æ˜¯æ‰§è¡Œäº† <code>history</code> çš„ <code>push</code> å’Œ <code>replace</code> æ–¹æ³•åšè·¯ç”±è·³è½¬ã€‚</p><p>æœ€ååˆ¤æ–­å½“å‰ <code>tag</code> æ˜¯å¦æ˜¯ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œ<code>&lt;router-link&gt;</code> é»˜è®¤ä¼šæ¸²æŸ“æˆ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿®æ”¹ <code>tag</code> çš„ <code>prop</code> æ¸²æŸ“æˆå…¶ä»–èŠ‚ç‚¹ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šå°è¯•æ‰¾å®ƒå­å…ƒç´ çš„ <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œå¦‚æœæœ‰åˆ™æŠŠäº‹ä»¶ç»‘å®šåˆ° <code>&lt;a&gt;</code> æ ‡ç­¾ä¸Šå¹¶æ·»åŠ  <code>href</code> å±æ€§ï¼Œå¦åˆ™ç»‘å®šåˆ°å¤–å±‚å…ƒç´ æœ¬èº«ã€‚</p><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><p>é‚£ä¹ˆè‡³æ­¤æˆ‘ä»¬æŠŠè·¯ç”±çš„ <code>transitionTo</code> çš„ä¸»ä½“è¿‡ç¨‹åˆ†æå®Œæ¯•äº†ï¼Œå…¶ä»–ä¸€äº›åˆ†æ”¯æ¯”å¦‚é‡å®šå‘ã€åˆ«åã€æ»šåŠ¨è¡Œä¸ºç­‰åŒå­¦ä»¬å¯ä»¥è‡ªè¡Œå†å»åˆ†æã€‚</p><p>è·¯å¾„å˜åŒ–æ˜¯è·¯ç”±ä¸­æœ€é‡è¦çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è¦è®°ä½ä»¥ä¸‹å†…å®¹ï¼šè·¯ç”±å§‹ç»ˆä¼šç»´æŠ¤å½“å‰çš„çº¿è·¯ï¼Œè·¯ç”±åˆ‡æ¢çš„æ—¶å€™ä¼šæŠŠå½“å‰çº¿è·¯åˆ‡æ¢åˆ°ç›®æ ‡çº¿è·¯ï¼Œåˆ‡æ¢è¿‡ç¨‹ä¸­ä¼šæ‰§è¡Œä¸€ç³»åˆ—çš„å¯¼èˆªå®ˆå«é’©å­å‡½æ•°ï¼Œä¼šæ›´æ”¹ urlï¼ŒåŒæ ·ä¹Ÿä¼šæ¸²æŸ“å¯¹åº”çš„ç»„ä»¶ï¼Œåˆ‡æ¢å®Œæ¯•åä¼šæŠŠç›®æ ‡çº¿è·¯æ›´æ–°æ›¿æ¢å½“å‰çº¿è·¯ï¼Œè¿™æ ·å°±ä¼šä½œä¸ºä¸‹ä¸€æ¬¡çš„è·¯å¾„åˆ‡æ¢çš„ä¾æ®ã€‚</p></div></div></main><footer class="VPDocFooter" data-v-6b87e69f data-v-37656e44><!--[--><!--]--><div class="edit-info" data-v-37656e44><div class="edit-link" data-v-37656e44><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://gitee.com/ding1992/vitepress-starter/tree/master/docs/analysis/vue-router/transition-to.md" target="_blank" rel="noreferrer" data-v-37656e44><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-37656e44><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> åœ¨ Gitee ä¸Šç¼–è¾‘æ­¤é¡µ<!--]--></a></div><div class="last-updated" data-v-37656e44><p class="VPLastUpdated" data-v-37656e44 data-v-149a99df>ä¸Šæ¬¡æ›´æ–°: <time datetime="2024-02-24T13:19:23.000Z" data-v-149a99df></time></p></div></div><nav class="prev-next" data-v-37656e44><div class="pager" data-v-37656e44><a class="pager-link prev" href="/vitepress-docs/analysis/vue-router/matcher.html" data-v-37656e44><span class="desc" data-v-37656e44>ä¸Šä¸€ç¯‡</span><span class="title" data-v-37656e44>matcher</span></a></div><div class="pager" data-v-37656e44><a class="pager-link next" href="/vitepress-docs/analysis/vuex/introduction.html" data-v-37656e44><span class="desc" data-v-37656e44>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-37656e44>Introduction</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-6be51355 data-v-e03eb2e1><div class="container" data-v-e03eb2e1><!----><p class="copyright" data-v-e03eb2e1>Copyright Â© 2023-present å¼ºå¼º</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"algorithm_flex-grid.md\":\"b1f98492\",\"analysis_compile_introduction.md\":\"9accfe28\",\"algorithm_bfc.md\":\"ccc4aff1\",\"algorithm_other.md\":\"78d5f9e1\",\"algorithm_byte.md\":\"f333a7c8\",\"algorithm_layout.md\":\"74640557\",\"algorithm_other-css.md\":\"7ae916ca\",\"analysis_components_component-register.md\":\"8c392f83\",\"analysis_data-driven_introduction.md\":\"729df872\",\"analysis_components_introduction.md\":\"83332283\",\"algorithm_tree.md\":\"f620413a\",\"analysis_components_merge-option.md\":\"54c8583f\",\"analysis_compile_optimize.md\":\"1ccb575c\",\"analysis_components_lifecycle.md\":\"28ff3070\",\"analysis_data-driven_create-element.md\":\"a8bcefaf\",\"analysis_extend_introduction.md\":\"8c62c7bb\",\"analysis_extend_transition-group.md\":\"b81ea894\",\"analysis_data-driven_new-vue.md\":\"b22058fd\",\"analysis_components_async-component.md\":\"00e5590b\",\"analysis_compile_entrance.md\":\"8406162f\",\"analysis_data-driven_render.md\":\"315aac21\",\"analysis_pinia_introduction.md\":\"003267d4\",\"analysis_guide_index.md\":\"51c135c8\",\"analysis_extend_event.md\":\"290aaec5\",\"analysis_prepare_introduction.md\":\"1abb4c60\",\"analysis_prepare_flow.md\":\"146e4f6c\",\"analysis_extend_keep-alive.md\":\"9fcf5a99\",\"analysis_extend_slot.md\":\"860d8cc5\",\"analysis_components_create-component.md\":\"5d8e99fe\",\"analysis_data-driven_update.md\":\"08a8e7d1\",\"analysis_data-driven_mounted.md\":\"b46e5104\",\"analysis_prepare_directory.md\":\"17b0e811\",\"analysis_components_patch.md\":\"bbaee11a\",\"analysis_extend_v-model.md\":\"6632b4d1\",\"analysis_compile_codegen.md\":\"421ae7f4\",\"analysis_prepare_entrance.md\":\"171cf76c\",\"analysis_compile_parse.md\":\"d4a27d8e\",\"analysis_data-driven_virtual-dom.md\":\"4f7285ce\",\"analysis_prepare_build.md\":\"e2ae0843\",\"analysis_reactive_component-update.md\":\"ca9c5c27\",\"analysis_reactive_computed-watcher.md\":\"e3d1bae7\",\"analysis_reactive_introduction.md\":\"15363fab\",\"analysis_extend_transition.md\":\"dbaf2e08\",\"analysis_reactive_next-tick.md\":\"086b4bb8\",\"analysis_reactive_getters.md\":\"4852c662\",\"analysis_reactive_summary.md\":\"b19715dc\",\"analysis_reactive_questions.md\":\"768947f5\",\"analysis_reactive_props.md\":\"501eb5df\",\"analysis_vue-router_introduction.md\":\"2c34a1ca\",\"analysis_vue-router_install.md\":\"a417b351\",\"analysis_reactive_reactive-object.md\":\"ebdea1de\",\"analysis_reactive_setters.md\":\"1552f502\",\"analysis_vue-router_matcher.md\":\"37f4e934\",\"analysis_vue-router_router.md\":\"3e51401d\",\"analysis_vuex_introduction.md\":\"23d9bc75\",\"axios_01.md\":\"d02557c8\",\"analysis_vuex_plugin.md\":\"cee73648\",\"axios_03.md\":\"fe0358d7\",\"axios_02.md\":\"815bc715\",\"analysis_vuex_api.md\":\"7000d7ca\",\"axios_05.md\":\"a95c349a\",\"axios_04.md\":\"700e3ac8\",\"axios_08.md\":\"5fbb0bbf\",\"component-library_guide.md\":\"a583e0e2\",\"axios_07.md\":\"680d33f5\",\"component-library_document.md\":\"0f7f58ee\",\"analysis_vue-router_transition-to.md\":\"f606872b\",\"analysis_vuex_init.md\":\"b1d6b7e2\",\"component-library_getting-started.md\":\"91954c9f\",\"component-library_vitest.md\":\"ea6a2859\",\"axios_06.md\":\"4c3c4cfa\",\"dailynote_getattribute.md\":\"da6add84\",\"dailynote_deploy.md\":\"cbbd1870\",\"dailynote_tcp.md\":\"e25c6e5e\",\"dailynote_cache.md\":\"e81ac7a9\",\"dailynote_type.md\":\"0ef8c52c\",\"component-library_unocss.md\":\"74d32e22\",\"dailynote_syntax-optimize.md\":\"21a5b417\",\"dailynote_websocket.md\":\"5e050724\",\"dailynote_project.md\":\"6c3fa22e\",\"develop-summary_bignumber.md\":\"69d953f7\",\"develop-summary_charles.md\":\"4c506630\",\"database_mysql_mysql2.md\":\"072043de\",\"design-pattern_index.md\":\"14f1f348\",\"electron_index.md\":\"fb7f304b\",\"express_index.md\":\"6d359d67\",\"database_mysql_index.md\":\"f717471e\",\"develop-summary_string.md\":\"94cda424\",\"develop-summary_layout.md\":\"5d63012c\",\"develop-summary_tips.md\":\"fa49b324\",\"develop-summary_plugin.md\":\"56a82f6d\",\"golang_advance.md\":\"8b470a33\",\"develop-summary_cross-domain.md\":\"1dc0cc1f\",\"guide.md\":\"b7fce8c2\",\"index.md\":\"a490eaa7\",\"golang_builtin.md\":\"baf690f0\",\"koa_mongodb.md\":\"ae67812e\",\"koa_restful.md\":\"61059981\",\"node_index.md\":\"63c2df17\",\"koa_onion.md\":\"15bfac84\",\"mini-program_index.md\":\"e5fe659c\",\"golang_syntax.md\":\"9553175f\",\"network_index.md\":\"4055fe34\",\"mini-program_design.md\":\"e28fc426\",\"react_feature.md\":\"6bb436bc\",\"mini-program_difficulty.md\":\"32b17164\",\"structure_parcel_index.md\":\"d6e24e1d\",\"secure_xss.md\":\"a6ba2f99\",\"secure_csrf.md\":\"aa6fc88c\",\"react_hooks.md\":\"04f67807\",\"structure_rollup_index.md\":\"747c6c37\",\"react_redux.md\":\"60c21df7\",\"structure_rollup_package.md\":\"b06c9af1\",\"structure_rollup_router.md\":\"4d2a490f\",\"structure_vite_environment.md\":\"7fc386be\",\"structure_webpack_dispose.md\":\"e5bd9bd8\",\"structure_vite_index.md\":\"7ca8532c\",\"structure_webpack_plugin.md\":\"4b6f1678\",\"structure_webpack_loader.md\":\"7ee2d607\",\"structure_webpack_optimize.md\":\"83e86e16\",\"structure_webpack_webpack.md\":\"b3207851\",\"structure_webpack_tapable.md\":\"46f84d76\",\"turf_index.md\":\"529bd8b6\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_01.åŸºç¡€ç±»å‹.md\":\"796996ae\",\"test_jest_index.md\":\"2f78ba76\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_02.å˜é‡å£°æ˜.md\":\"4f71524c\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_03.æ¥å£.md\":\"0dd38ef2\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_07.ç±»å‹æ¨æ–­.md\":\"465e1af9\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_04.ç±».md\":\"4b76593c\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_06.æ³›å‹.md\":\"fa5ae51e\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_05.å‡½æ•°.md\":\"06af429b\",\"typescript_typescript å¸¸ç”¨è¯­æ³•_08.é«˜çº§ç±»å‹.md\":\"71395fce\",\"typescript_åˆè¯† typescript_01.ç®€ä»‹.md\":\"0df2c85e\",\"typescript_å•å…ƒæµ‹è¯•_01.å‰è¨€.md\":\"c9c558f4\",\"typescript_åˆè¯† typescript_02.å®‰è£… typescript.md\":\"cd8a2a0d\",\"typescript_åˆè¯† typescript_03.ç¼–å†™ç¬¬ä¸€ä¸ª typescript ç¨‹åº.md\":\"31f0108e\",\"typescript_å•å…ƒæµ‹è¯•_02.jest å®‰è£…å’Œé…ç½®.md\":\"e1abb24d\",\"typescript_å•å…ƒæµ‹è¯•_05.headers æ¨¡å—å•å…ƒæµ‹è¯•.md\":\"ec7a2a33\",\"typescript_å•å…ƒæµ‹è¯•_06.axios å®ä¾‹æ¨¡å—å•å…ƒæµ‹è¯•.md\":\"ea61b640\",\"typescript_å•å…ƒæµ‹è¯•_04.è¯·æ±‚æ¨¡å—å•å…ƒæµ‹è¯•.md\":\"c6371bb6\",\"typescript_å•å…ƒæµ‹è¯•_08.mergeconfig æ¨¡å—å•å…ƒæµ‹è¯•.md\":\"0a7b230d\",\"typescript_å•å…ƒæµ‹è¯•_03.è¾…åŠ©æ¨¡å—å•å…ƒæµ‹è¯•.md\":\"57187fcf\",\"typescript_å•å…ƒæµ‹è¯•_07.æ‹¦æˆªå™¨æ¨¡å—å•å…ƒæµ‹è¯•.md\":\"155ed015\",\"typescript_å•å…ƒæµ‹è¯•_09.è¯·æ±‚å–æ¶ˆæ¨¡å—å•å…ƒæµ‹è¯•.md\":\"5a748cec\",\"typescript_syntax.md\":\"0990f0b1\",\"typescript_åŸºç¡€åŠŸèƒ½å®ç°_06.å¤„ç†å“åº” data.md\":\"3dea9749\",\"typescript_åŸºç¡€åŠŸèƒ½å®ç°_04.è·å–å“åº”æ•°æ®.md\":\"eca5410c\",\"typescript_å¼‚å¸¸æƒ…å†µå¤„ç†_02.é”™è¯¯ä¿¡æ¯å¢å¼º.md\":\"93f58f06\",\"typescript_åŸºç¡€åŠŸèƒ½å®ç°_05.å¤„ç†å“åº” header.md\":\"2c615366\",\"typescript_åŸºç¡€åŠŸèƒ½å®ç°_03.å¤„ç†è¯·æ±‚ header.md\":\"aaa7da7a\",\"typescript_åŸºç¡€åŠŸèƒ½å®ç°_02.å¤„ç†è¯·æ±‚ body æ•°æ®.md\":\"ebf9f89e\",\"typescript_å¼‚å¸¸æƒ…å†µå¤„ç†_01.é”™è¯¯å¤„ç†.md\":\"9047d45a\",\"typescript_åŸºç¡€åŠŸèƒ½å®ç°_01.å¤„ç†è¯·æ±‚ url å‚æ•°.md\":\"f3d56e3f\",\"typescript_å–æ¶ˆåŠŸèƒ½å®ç°_01.å–æ¶ˆåŠŸèƒ½çš„è®¾è®¡ä¸å®ç°.md\":\"17b0cab7\",\"typescript_å•å…ƒæµ‹è¯•_10.å‰©ä½™æ¨¡å—å•å…ƒæµ‹è¯•.md\":\"7aab96c7\",\"typescript_æ¥å£æ‰©å±•_02.å‡½æ•°é‡è½½.md\":\"7be8216c\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_01.withcredentials.md\":\"cfa06f18\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_02.xsrf é˜²å¾¡.md\":\"e2565443\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_04.http æˆæƒ.md\":\"57e21f61\",\"typescript_æ¥å£æ‰©å±•_03.å“åº”æ•°æ®æ”¯æŒæ³›å‹.md\":\"110b705f\",\"typescript_æ‹¦æˆªå™¨å®ç°_01.æ‹¦æˆªå™¨è®¾è®¡ä¸å®ç°.md\":\"457fce3b\",\"typescript_æ¥å£æ‰©å±•_01.æ‰©å±•æ¥å£.md\":\"074671f4\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_03.ä¸Šä¼ å’Œä¸‹è½½çš„è¿›åº¦ç›‘æ§.md\":\"bde2dba2\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_05.è‡ªå®šä¹‰åˆæ³•çŠ¶æ€ç .md\":\"67936336\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_07.baseurl.md\":\"4a5a5ca2\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_06.è‡ªå®šä¹‰å‚æ•°åºåˆ—åŒ–.md\":\"3b99e423\",\"typescript_æ›´å¤šåŠŸèƒ½å®ç°_08.é™æ€æ–¹æ³•æ‰©å±•.md\":\"5a15d3e9\",\"typescript_éƒ¨ç½²ä¸å‘å¸ƒ_02.å¼•ç”¨ ts-axios åº“.md\":\"9deacb3d\",\"typescript_éƒ¨ç½²ä¸å‘å¸ƒ_01.ts-axios ç¼–è¯‘ä¸å‘å¸ƒ.md\":\"d959ea0e\",\"typescript_é¡¹ç›®åˆå§‹åŒ–_01.éœ€æ±‚åˆ†æ.md\":\"65022c2c\",\"typescript_é…ç½®åŒ–å®ç°_01.åˆå¹¶é…ç½®çš„è®¾è®¡ä¸å®ç°.md\":\"c3276b04\",\"typescript_é…ç½®åŒ–å®ç°_03.æ‰©å±• create é™æ€æ¥å£.md\":\"f74f9bf9\",\"typescript_é…ç½®åŒ–å®ç°_02.è¯·æ±‚å’Œå“åº”é…ç½®åŒ–.md\":\"c4e9b473\",\"typescript_é¡¹ç›®åˆå§‹åŒ–_02.åˆå§‹åŒ–é¡¹ç›®.md\":\"cdd9ec01\",\"vitepress_index.md\":\"6a3e686a\",\"typescript_é¡¹ç›®åˆå§‹åŒ–_03.ç¼–å†™åŸºç¡€è¯·æ±‚ä»£ç .md\":\"65ab9032\",\"vue-cli_01.md\":\"d37ff997\",\"vue_compile.md\":\"32fc85d6\",\"vue-cli_03.md\":\"74b97fa4\",\"vue_directives.md\":\"44bae96e\",\"vue_diff.md\":\"f9c477a8\",\"vue-cli_02.md\":\"b6a73ef0\",\"vue_components.md\":\"b9e50053\",\"vue_jsx.md\":\"94fae922\",\"vue_optimize.md\":\"218b481d\",\"vue_reactive.md\":\"495a6d43\",\"vue_setup.md\":\"d9cafd60\",\"vue_weigh.md\":\"ad44fee4\",\"vue_util.md\":\"6b68cc31\",\"vue_interview.md\":\"c339e0c5\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"StriveDocs\",\"description\":\"å‰ç«¯æŠ€æœ¯åšå®¢\",\"base\":\"/vitepress-docs/\",\"head\":[],\"appearance\":\"dark\",\"themeConfig\":{\"logo\":\"./logo.svg\",\"outline\":\"deep\",\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"returnToTopLabel\":\"è¿”å›é¡¶éƒ¨\",\"outlineTitle\":\"å¯¼èˆªæ \",\"darkModeSwitchLabel\":\"å¤–è§‚\",\"sidebarMenuLabel\":\"å½’æ¡£\",\"editLink\":{\"pattern\":\"https://gitee.com/ding1992/vitepress-starter/tree/master/docs/:path\",\"text\":\"åœ¨ Gitee ä¸Šç¼–è¾‘æ­¤é¡µ\"},\"lastUpdatedText\":\"ä¸Šæ¬¡æ›´æ–°\",\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"ğŸ”¥ Vue.js æŠ€æœ¯æ­ç§˜\",\"link\":\"/analysis/guide/\"},{\"text\":\"ğŸ React\",\"link\":\"/react/hooks\"},{\"text\":\"â­ å°ç¨‹åº\",\"link\":\"/mini-program/design\"},{\"text\":\"å‰ç«¯è¿›é˜¶\",\"items\":[{\"text\":\"ğŸ è„šæ‰‹æ¶\",\"link\":\"/vue-cli/01\"},{\"text\":\"ğŸ”¥ TS ç›¸å…³\",\"link\":\"/typescript/syntax\"},{\"text\":\"Axios æºç è§£æ\",\"link\":\"/axios/01\"},{\"text\":\"æ„å»ºå·¥å…·\",\"link\":\"/structure/vite/\"},{\"text\":\"æ•°æ®ç»“æ„ä¸ç®—æ³•\",\"link\":\"/algorithm/tree\"},{\"text\":\"è®¾è®¡æ¨¡å¼\",\"link\":\"/design-pattern/\"},{\"text\":\"ç»„ä»¶åº“\",\"link\":\"/component-library/guide\"},{\"text\":\"å•å…ƒæµ‹è¯•\",\"items\":[{\"text\":\"Jest\",\"link\":\"/test/jest/\"}]},{\"text\":\"ç½‘ç»œã€åè®®\",\"link\":\"/network/\"}]},{\"text\":\"å…¨æ ˆåŸºçŸ³\",\"items\":[{\"text\":\"Node\",\"link\":\"/node/\"},{\"text\":\"Express\",\"link\":\"/express/\"},{\"text\":\"Koa\",\"link\":\"/koa/onion\"},{\"text\":\"æ•°æ®åº“\",\"link\":\"/database/mysql/\"}]},{\"text\":\"ğŸ“ å¤‡å¿˜å½•\",\"link\":\"/develop-summary/string\"}],\"sidebar\":{\"/\":[{\"text\":\"å¼€å§‹é˜…è¯»\",\"collapsed\":false,\"items\":[{\"text\":\"é˜…è¯»é¡»çŸ¥\",\"link\":\"/guide\"}]},{\"text\":\"ğŸ Turf\",\"collapsed\":false,\"items\":[{\"text\":\"å¸¸ç”¨å·¥å…·å‡½æ•°\",\"link\":\"/turf/\"}]},{\"text\":\"ğŸ”¥ æ¯æ—¥ä¸€è®°\",\"collapsed\":true,\"items\":[{\"text\":\"01-20 å…³äº import type çš„ç†è§£\",\"link\":\"/dailyNote/type\"},{\"text\":\"01-21 Vue3 é¡¹ç›®æ­å»º\",\"link\":\"/dailyNote/project\"},{\"text\":\"04-14 HTTP ç¼“å­˜\",\"link\":\"/dailyNote/cache\"},{\"text\":\"04-14 TCP\",\"link\":\"/dailyNote/tcp\"},{\"text\":\"04-17 js è¯­æ³•ç¼–å†™ä¼˜åŒ–\",\"link\":\"dailyNote/syntax-optimize\"},{\"text\":\"04-20 websocket å®æ“\",\"link\":\"dailyNote/websocket\"},{\"text\":\"04-21 éƒ¨ç½²\",\"link\":\"dailyNote/deploy\"},{\"text\":\"06-23 å±æ€§æ“ä½œ\",\"link\":\"dailyNote/getAttribute\"}]}],\"/mini-program/\":[{\"text\":\"åŸç†ç¯‡\",\"items\":[{\"text\":\"åº•å±‚å®ç°\",\"link\":\"/mini-program/design\"}]}],\"/react/\":[{\"text\":\"å¸¸ç”¨è¯­æ³•\",\"items\":[{\"text\":\"hooks\",\"link\":\"/react/hooks\"},{\"text\":\"feature\",\"link\":\"/react/feature\"},{\"text\":\"redux\",\"link\":\"/react/redux\"}]}],\"/component-library/\":[{\"text\":\"ç»„ä»¶åº“\",\"items\":[{\"text\":\"å¯¼è¯»\",\"link\":\"/component-library/guide\"},{\"text\":\"å¿«é€Ÿå¼€å§‹\",\"link\":\"/component-library/getting-started\"},{\"text\":\"åŸå­åŒ– CSS\",\"link\":\"/component-library/unocss\"},{\"text\":\"æ–‡æ¡£ç³»ç»Ÿ\",\"link\":\"/component-library/document\"},{\"text\":\"Jest å•å…ƒæµ‹è¯•\",\"link\":\"/test/jest/\"},{\"text\":\"é›†æˆ vitest\",\"link\":\"/component-library/vitest\"}]}],\"/typescript/\":[{\"text\":\"å¸¸ç”¨è¯­æ³•æ¢³ç†\",\"link\":\"/typescript/syntax\"},{\"text\":\"TS ä»é›¶å®ç° Axios\",\"items\":[{\"text\":\"åˆè¯† TypeScript\",\"collapsed\":false,\"items\":[{\"text\":\"ç®€ä»‹\",\"link\":\"/typescript/åˆè¯† TypeScript/01.ç®€ä»‹\"},{\"text\":\"å®‰è£… TypeScript\",\"link\":\"/typescript/åˆè¯† TypeScript/02.å®‰è£… TypeScript\"},{\"text\":\"ç¼–å†™ç¬¬ä¸€ä¸ª TypeScript ç¨‹åº\",\"link\":\"/typescript/åˆè¯† TypeScript/03.ç¼–å†™ç¬¬ä¸€ä¸ª TypeScript ç¨‹åº\"}]},{\"text\":\"TypeScript å¸¸ç”¨è¯­æ³•\",\"collapsed\":false,\"items\":[{\"text\":\"åŸºç¡€ç±»å‹\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/01.åŸºç¡€ç±»å‹\"},{\"text\":\"å˜é‡å£°æ˜\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/02.å˜é‡å£°æ˜\"},{\"text\":\"æ¥å£\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/03.æ¥å£\"},{\"text\":\"ç±»\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/04.ç±»\"},{\"text\":\"å‡½æ•°\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/05.å‡½æ•°\"},{\"text\":\"æ³›å‹\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/06.æ³›å‹\"},{\"text\":\"ç±»å‹æ¨æ–­\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/07.ç±»å‹æ¨æ–­\"},{\"text\":\"é«˜çº§ç±»å‹\",\"link\":\"/typescript/TypeScript å¸¸ç”¨è¯­æ³•/08.é«˜çº§ç±»å‹\"}]},{\"text\":\"é¡¹ç›®åˆå§‹åŒ–\",\"collapsed\":false,\"items\":[{\"text\":\"éœ€æ±‚åˆ†æ\",\"link\":\"/typescript/é¡¹ç›®åˆå§‹åŒ–/01.éœ€æ±‚åˆ†æ\"},{\"text\":\"åˆå§‹åŒ–é¡¹ç›®\",\"link\":\"/typescript/é¡¹ç›®åˆå§‹åŒ–/02.åˆå§‹åŒ–é¡¹ç›®\"},{\"text\":\"ç¼–å†™åŸºç¡€è¯·æ±‚ä»£ç \",\"link\":\"/typescript/é¡¹ç›®åˆå§‹åŒ–/03.ç¼–å†™åŸºç¡€è¯·æ±‚ä»£ç \"}]},{\"text\":\"åŸºç¡€åŠŸèƒ½å®ç°\",\"collapsed\":false,\"items\":[{\"text\":\"å¤„ç†è¯·æ±‚ url å‚æ•°\",\"link\":\"/typescript/åŸºç¡€åŠŸèƒ½å®ç°/01.å¤„ç†è¯·æ±‚ url å‚æ•°\"},{\"text\":\"å¤„ç†è¯·æ±‚ body æ•°æ®\",\"link\":\"/typescript/åŸºç¡€åŠŸèƒ½å®ç°/02.å¤„ç†è¯·æ±‚ body æ•°æ®\"},{\"text\":\"å¤„ç†è¯·æ±‚ header\",\"link\":\"/typescript/åŸºç¡€åŠŸèƒ½å®ç°/03.å¤„ç†è¯·æ±‚ header\"},{\"text\":\"è·å–å“åº”æ•°æ®\",\"link\":\"/typescript/åŸºç¡€åŠŸèƒ½å®ç°/04.è·å–å“åº”æ•°æ®\"},{\"text\":\"å¤„ç†å“åº” header\",\"link\":\"/typescript/åŸºç¡€åŠŸèƒ½å®ç°/05.å¤„ç†å“åº” header\"},{\"text\":\"å¤„ç†å“åº” data\",\"link\":\"/typescript/åŸºç¡€åŠŸèƒ½å®ç°/06.å¤„ç†å“åº” data\"}]},{\"text\":\"å¼‚å¸¸æƒ…å†µå¤„ç†\",\"collapsed\":false,\"items\":[{\"text\":\"é”™è¯¯å¤„ç†\",\"link\":\"/typescript/å¼‚å¸¸æƒ…å†µå¤„ç†/01.é”™è¯¯å¤„ç†\"},{\"text\":\"é”™è¯¯ä¿¡æ¯å¢å¼º\",\"link\":\"/typescript/å¼‚å¸¸æƒ…å†µå¤„ç†/02.é”™è¯¯ä¿¡æ¯å¢å¼º\"}]},{\"text\":\"æ¥å£æ‰©å±•\",\"collapsed\":false,\"items\":[{\"text\":\"æ‰©å±•æ¥å£\",\"link\":\"/typescript/æ¥å£æ‰©å±•/01.æ‰©å±•æ¥å£\"},{\"text\":\"å‡½æ•°é‡è½½\",\"link\":\"/typescript/æ¥å£æ‰©å±•/02.å‡½æ•°é‡è½½\"},{\"text\":\"å“åº”æ•°æ®æ”¯æŒæ³›å‹\",\"link\":\"/typescript/æ¥å£æ‰©å±•/03.å“åº”æ•°æ®æ”¯æŒæ³›å‹\"}]},{\"text\":\"æ‹¦æˆªå™¨å®ç°\",\"collapsed\":false,\"items\":[{\"text\":\"æ‹¦æˆªå™¨è®¾è®¡ä¸å®ç°\",\"link\":\"/typescript/æ‹¦æˆªå™¨å®ç°/01.æ‹¦æˆªå™¨è®¾è®¡ä¸å®ç°\"}]},{\"text\":\"é…ç½®åŒ–å®ç°\",\"collapsed\":false,\"items\":[{\"text\":\"åˆå¹¶é…ç½®çš„è®¾è®¡ä¸å®ç°\",\"link\":\"/typescript/é…ç½®åŒ–å®ç°/01.åˆå¹¶é…ç½®çš„è®¾è®¡ä¸å®ç°\"},{\"text\":\"è¯·æ±‚å’Œå“åº”é…ç½®åŒ–\",\"link\":\"/typescript/é…ç½®åŒ–å®ç°/02.è¯·æ±‚å’Œå“åº”é…ç½®åŒ–\"},{\"text\":\"æ‰©å±• create é™æ€æ¥å£\",\"link\":\"/typescript/é…ç½®åŒ–å®ç°/03.æ‰©å±• create é™æ€æ¥å£\"}]},{\"text\":\"å–æ¶ˆåŠŸèƒ½å®ç°\",\"collapsed\":false,\"items\":[{\"text\":\"å–æ¶ˆåŠŸèƒ½çš„è®¾è®¡ä¸å®ç°\",\"link\":\"/typescript/å–æ¶ˆåŠŸèƒ½å®ç°/01.å–æ¶ˆåŠŸèƒ½çš„è®¾è®¡ä¸å®ç°\"}]},{\"text\":\"æ›´å¤šåŠŸèƒ½å®ç°\",\"collapsed\":false,\"items\":[{\"text\":\"withCredentials\",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/01.withCredentials\"},{\"text\":\"XSRF é˜²å¾¡\",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/02.XSRF é˜²å¾¡\"},{\"text\":\"ä¸Šä¼ å’Œä¸‹è½½çš„è¿›åº¦ç›‘æ§\",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/03.ä¸Šä¼ å’Œä¸‹è½½çš„è¿›åº¦ç›‘æ§\"},{\"text\":\"HTTP æˆæƒ\",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/04.HTTP æˆæƒ\"},{\"text\":\"è‡ªå®šä¹‰åˆæ³•çŠ¶æ€ç \",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/05.è‡ªå®šä¹‰åˆæ³•çŠ¶æ€ç \"},{\"text\":\"è‡ªå®šä¹‰å‚æ•°åºåˆ—åŒ–\",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/06.è‡ªå®šä¹‰å‚æ•°åºåˆ—åŒ–\"},{\"text\":\"baseURL\",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/07.baseURL\"},{\"text\":\"é™æ€æ–¹æ³•æ‰©å±•\",\"link\":\"/typescript/æ›´å¤šåŠŸèƒ½å®ç°/08.é™æ€æ–¹æ³•æ‰©å±•\"}]},{\"text\":\"å•å…ƒæµ‹è¯•\",\"collapsed\":false,\"items\":[{\"text\":\"å‰è¨€\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/01.å‰è¨€\"},{\"text\":\"Jest å®‰è£…å’Œé…ç½®\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/02.Jest å®‰è£…å’Œé…ç½®\"},{\"text\":\"è¾…åŠ©æ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/03.è¾…åŠ©æ¨¡å—å•å…ƒæµ‹è¯•\"},{\"text\":\"è¯·æ±‚æ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/04.è¯·æ±‚æ¨¡å—å•å…ƒæµ‹è¯•\"},{\"text\":\"headers æ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/05.headers æ¨¡å—å•å…ƒæµ‹è¯•\"},{\"text\":\"Axios å®ä¾‹æ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/06.Axios å®ä¾‹æ¨¡å—å•å…ƒæµ‹è¯•\"},{\"text\":\"æ‹¦æˆªå™¨æ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/07.æ‹¦æˆªå™¨æ¨¡å—å•å…ƒæµ‹è¯•\"},{\"text\":\"mergeConfig æ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/08.mergeConfig æ¨¡å—å•å…ƒæµ‹è¯•\"},{\"text\":\"è¯·æ±‚å–æ¶ˆæ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/09.è¯·æ±‚å–æ¶ˆæ¨¡å—å•å…ƒæµ‹è¯•\"},{\"text\":\"å‰©ä½™æ¨¡å—å•å…ƒæµ‹è¯•\",\"link\":\"/typescript/å•å…ƒæµ‹è¯•/10.å‰©ä½™æ¨¡å—å•å…ƒæµ‹è¯•\"}]},{\"text\":\"éƒ¨ç½²ä¸å‘å¸ƒ\",\"collapsed\":false,\"items\":[{\"text\":\"ç¼–è¯‘ä¸å‘å¸ƒ\",\"link\":\"/typescript/éƒ¨ç½²ä¸å‘å¸ƒ/01.ts-axios ç¼–è¯‘ä¸å‘å¸ƒ\"},{\"text\":\"å¼•ç”¨ typescript åº“\",\"link\":\"/typescript/éƒ¨ç½²ä¸å‘å¸ƒ/02.å¼•ç”¨ ts-axios åº“\"}]}]}],\"/axios/\":[{\"text\":\"ä»‹ç»\",\"items\":[{\"text\":\"ä»‹ç»\",\"link\":\"/axios/01\"},{\"text\":\"å…¥å£\",\"link\":\"/axios/02\"},{\"text\":\"æ‹¦æˆªå™¨\",\"link\":\"/axios/03\"},{\"text\":\"åˆå¹¶é…ç½®\",\"link\":\"/axios/04\"},{\"text\":\"dispatchRequest\",\"link\":\"/axios/05\"},{\"text\":\"xhr\",\"link\":\"/axios/06\"},{\"text\":\"å–æ¶ˆè¯·æ±‚\",\"link\":\"/axios/07\"},{\"text\":\"é”™è¯¯å¤„ç†\",\"link\":\"/axios/08\"}]}],\"/vue-cli/\":[{\"text\":\"vue-cli æŠ€æœ¯æ­ç§˜\",\"items\":[{\"text\":\"å…¥å£\",\"link\":\"/vue-cli/01\"},{\"text\":\"é¡¹ç›®ç”Ÿæˆ\",\"link\":\"/vue-cli/02\"},{\"text\":\"ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…\",\"link\":\"/vue-cli/03\"}]}],\"/vue/\":[{\"text\":\"Vue ä¸“æ \",\"collapsed\":false,\"items\":[{\"text\":\"ä¸€æ–‡çœ‹æ‡‚ Vue.js 3.0 çš„ä¼˜åŒ–\",\"link\":\"/vue/optimize\"},{\"text\":\"æƒè¡¡çš„è‰ºæœ¯\",\"link\":\"/vue/weigh\"},{\"text\":\"å“åº”å¼åŸç†å‰–æ\",\"link\":\"/vue/reactive\"},{\"text\":\"æ­ç§˜ diff ç¥ç§˜é¢çº±\",\"link\":\"/vue/diff\"},{\"text\":\"ç¼–è¯‘ç›¸å…³\",\"link\":\"/vue/compile\"},{\"text\":\"setup è¯­æ³•ç³–\",\"link\":\"/vue/setup\"},{\"text\":\"ç»„ä»¶å°è£…\",\"link\":\"/vue/components\"},{\"text\":\"è‡ªå®šä¹‰æŒ‡ä»¤å°è£…\",\"link\":\"/vue/directives\"},{\"text\":\"å¤§æ‚è„\",\"link\":\"/vue/interview\"},{\"text\":\"å·¥å…·å‡½æ•°ç›˜ç‚¹\",\"link\":\"/vue/util\"},{\"text\":\"jsx\",\"link\":\"/vue/jsx\"}]}],\"/golang/\":[{\"text\":\"golang ä¸“æ \",\"collapsed\":false,\"items\":[{\"text\":\"å¸¸ç”¨è¯­æ³•\",\"link\":\"/golang/syntax\"},{\"text\":\"è¿›é˜¶è¯­æ³•\",\"link\":\"/golang/advance\"},{\"text\":\"golang å†…ç½®åŒ…\",\"link\":\"/golang/builtIn\"}]}],\"/analysis/\":[{\"text\":\"ä»‹ç»\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/guide/\"}]},{\"text\":\"å‡†å¤‡å·¥ä½œ\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/prepare/introduction\"},{\"text\":\"è®¤è¯† Flow\",\"link\":\"/analysis/prepare/flow\"},{\"text\":\"Vue.js æºç ç›®å½•è®¾è®¡\",\"link\":\"/analysis/prepare/directory\"},{\"text\":\"Vue.js æºç æ„å»º\",\"link\":\"/analysis/prepare/build\"},{\"text\":\"ä»å…¥å£å¼€å§‹\",\"link\":\"/analysis/prepare/entrance\"}]},{\"text\":\"æ•°æ®é©±åŠ¨\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/data-driven/introduction\"},{\"text\":\"new Vue å‘ç”Ÿäº†ä»€ä¹ˆ\",\"link\":\"/analysis/data-driven/new-vue\"},{\"text\":\"Vue å®ä¾‹æŒ‚è½½çš„å®ç°\",\"link\":\"/analysis/data-driven/mounted\"},{\"text\":\"render\",\"link\":\"/analysis/data-driven/render\"},{\"text\":\"Virtual DOM\",\"link\":\"/analysis/data-driven/virtual-dom\"},{\"text\":\"createElement\",\"link\":\"/analysis/data-driven/create-element\"},{\"text\":\"update\",\"link\":\"/analysis/data-driven/update\"}]},{\"text\":\"ç»„ä»¶åŒ–\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/components/introduction\"},{\"text\":\"createComponent\",\"link\":\"/analysis/components/create-component\"},{\"text\":\"patch\",\"link\":\"/analysis/components/patch\"},{\"text\":\"åˆå¹¶é…ç½®\",\"link\":\"/analysis/components/merge-option\"},{\"text\":\"ç”Ÿå‘½å‘¨æœŸ\",\"link\":\"/analysis/components/lifecycle\"},{\"text\":\"ç»„ä»¶æ³¨å†Œ\",\"link\":\"/analysis/components/component-register\"},{\"text\":\"å¼‚æ­¥ç»„ä»¶\",\"link\":\"/analysis/components/async-component\"}]},{\"text\":\"æ·±å…¥å“åº”å¼åŸç†\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/reactive/introduction\"},{\"text\":\"å“åº”å¼å¯¹è±¡\",\"link\":\"/analysis/reactive/reactive-object\"},{\"text\":\"ä¾èµ–æ”¶é›†\",\"link\":\"/analysis/reactive/getters\"},{\"text\":\"æ´¾å‘æ›´æ–°\",\"link\":\"/analysis/reactive/setters\"},{\"text\":\"nextTick\",\"link\":\"/analysis/reactive/next-tick\"},{\"text\":\"æ£€æµ‹å˜åŒ–çš„æ³¨æ„äº‹é¡¹\",\"link\":\"/analysis/reactive/questions\"},{\"text\":\"è®¡ç®—å±æ€§ VS ä¾¦å¬å±æ€§\",\"link\":\"/analysis/reactive/computed-watcher\"},{\"text\":\"ç»„ä»¶æ›´æ–°\",\"link\":\"/analysis/reactive/component-update\"},{\"text\":\"Props (v2.6.11)\",\"link\":\"/analysis/reactive/props\"},{\"text\":\"åŸç†å›¾\",\"link\":\"/analysis/reactive/summary\"}]},{\"text\":\"ç¼–è¯‘\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/compile/introduction\"},{\"text\":\"ç¼–è¯‘å…¥å£\",\"link\":\"/analysis/compile/entrance\"},{\"text\":\"parse\",\"link\":\"/analysis/compile/parse\"},{\"text\":\"optimize\",\"link\":\"/analysis/compile/optimize\"},{\"text\":\"codegen\",\"link\":\"/analysis/compile/codegen\"}]},{\"text\":\"æ‰©å±•\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/extend/introduction\"},{\"text\":\"event\",\"link\":\"/analysis/extend/event\"},{\"text\":\"v-model\",\"link\":\"/analysis/extend/v-model\"},{\"text\":\"slot\",\"link\":\"/analysis/extend/slot\"},{\"text\":\"keep-alive\",\"link\":\"/analysis/extend/keep-alive\"},{\"text\":\"transition\",\"link\":\"/analysis/extend/transition\"},{\"text\":\"transition-group\",\"link\":\"/analysis/extend/transition-group\"}]},{\"text\":\"Vue Router\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/vue-router/introduction\"},{\"text\":\"è·¯ç”±æ³¨å†Œ\",\"link\":\"/analysis/vue-router/install\"},{\"text\":\"VueRouter å¯¹è±¡\",\"link\":\"/analysis/vue-router/router\"},{\"text\":\"matcher\",\"link\":\"/analysis/vue-router/matcher\"},{\"text\":\"è·¯å¾„åˆ‡æ¢\",\"link\":\"/analysis/vue-router/transition-to\"}]},{\"text\":\"Vuex\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/vuex/introduction\"},{\"text\":\"Vuex åˆå§‹åŒ–\",\"link\":\"/analysis/vuex/init\"},{\"text\":\"API\",\"link\":\"/analysis/vuex/api\"},{\"text\":\" æ’ä»¶\",\"link\":\"/analysis/vuex/plugin\"}]},{\"text\":\"Pinia\",\"collapsed\":false,\"items\":[{\"text\":\"Introduction\",\"link\":\"/analysis/pinia/introduction\"}]}],\"/test/\":[{\"text\":\"Jest\",\"items\":[{\"text\":\"è¿›é˜¶è¯­æ³•\",\"link\":\"/test/jest/\"}]}],\"/design-pattern/\":[{\"text\":\"è®¾è®¡æ¨¡å¼\",\"link\":\"/design-pattern/\"}],\"/network/\":[{\"text\":\"ç½‘ç»œã€åè®®\",\"link\":\"/network/\"}],\"/structure/\":[{\"text\":\"vite\",\"collapsed\":false,\"items\":[{\"text\":\"ä»é›¶æ­å»º vite å¼€å‘ç¯å¢ƒ(ä¸Š)\",\"link\":\"/structure/vite/\"},{\"text\":\"ä»é›¶æ­å»º vite å¼€å‘ç¯å¢ƒ(ä¸‹)\",\"link\":\"/structure/vite/environment\"}]},{\"text\":\"webpack\",\"collapsed\":false,\"items\":[{\"text\":\"é…ç½®\",\"link\":\"/structure/webpack/dispose\"},{\"text\":\"ä¼˜åŒ–\",\"link\":\"/structure/webpack/optimize\"},{\"text\":\"tapable\",\"link\":\"/structure/webpack/tapable\"},{\"text\":\"loader\",\"link\":\"/structure/webpack/loader\"},{\"text\":\"plugin\",\"link\":\"/structure/webpack/plugin\"},{\"text\":\"è¿·ä½  webpack\",\"link\":\"/structure/webpack/webpack\"}]},{\"text\":\"rollup\",\"collapsed\":false,\"items\":[{\"text\":\"ä¸€æ–‡çœ‹æ‡‚ rollup\",\"link\":\"/structure/rollup/\"},{\"text\":\"rollup æ‰“åŒ… vue-router\",\"link\":\"/structure/rollup/router\"},{\"text\":\"ä» vue-router çœ‹ package.json\",\"link\":\"/structure/rollup/package\"}]},{\"text\":\"parcel\",\"items\":[{\"text\":\"ä¸€æ–‡çœ‹æ‡‚ parcel\",\"link\":\"/structure/parcel/\"}]}],\"/algorithm/\":[{\"text\":\"CSS æ ¸å¿ƒæ¦‚å¿µ\",\"collapsed\":false,\"items\":[{\"text\":\"BFC åŠåº”ç”¨åœºæ™¯\",\"link\":\"/algorithm/bfc\"},{\"text\":\"è‡ªé€‚åº”ä¸‰åˆ—å¸ƒå±€\",\"link\":\"/algorithm/layout\"},{\"text\":\"flex å¸ƒå±€ && grid å¸ƒå±€\",\"link\":\"/algorithm/flex-grid\"},{\"text\":\"å…¶å®ƒ\",\"link\":\"/algorithm/other-css\"}]},{\"text\":\"æ•°æ®ç»“æ„ä¸ç®—æ³•\",\"collapsed\":false,\"items\":[{\"text\":\"æ ‘\",\"link\":\"/algorithm/tree\"},{\"text\":\"ä½è¿ç®—\",\"link\":\"/algorithm/byte\"},{\"text\":\"å…¶ä»–\",\"link\":\"/algorithm/other\"}]}],\"/develop-summary/\":[{\"text\":\"å­—ç¬¦ä¸²è½¬ä¹‰\",\"link\":\"/develop-summary/string\"},{\"text\":\"charles\",\"link\":\"/develop-summary/charles\"},{\"text\":\"å¸¸ç”¨å¸ƒå±€\",\"link\":\"/develop-summary/layout\"},{\"text\":\"è·¨åŸŸ\",\"link\":\"/develop-summary/cross-domain\"},{\"text\":\"bignumber\",\"link\":\"/develop-summary/bignumber\"},{\"text\":\"å¼€å‘æŠ€æœ¯æ±‡æ€»\",\"link\":\"/develop-summary/tips\"},{\"text\":\"åˆ†äº«: æ¡†æ¶ä¸­çš„æ’ä»¶æœºåˆ¶\",\"link\":\"/develop-summary/plugin\"}],\"/node/\":[{\"text\":\"å¸¸ç”¨ API ç›˜ç‚¹\",\"link\":\"/node/\"}],\"/express/\":[{\"text\":\"express\",\"link\":\"/express/\"}],\"/koa/\":[{\"text\":\"æ´‹è‘±æ¨¡å‹/å¯¼èˆªå®ˆå«\",\"link\":\"/koa/onion\"},{\"text\":\"RESTful\",\"link\":\"/koa/restful\"},{\"text\":\"MongoDB\",\"link\":\"/koa/mongodb\"}],\"/database/\":[{\"text\":\"mysql\",\"collapsed\":false,\"items\":[{\"text\":\"å¸¸ç”¨è¯­æ³•\",\"link\":\"/database/mysql/\"},{\"text\":\"mysql2\",\"link\":\"/database/mysql/mysql2\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/vuejs/vitepress\"},{\"icon\":{\"svg\":\"<svg width=\\\"36\\\" height=\\\"28\\\" viewBox=\\\"0 0 36 28\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n        <path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M17.5875 6.77268L21.8232 3.40505L17.5875 0.00748237L17.5837 0L13.3555 3.39757L17.5837 6.76894L17.5875 6.77268ZM17.5863 17.3955H17.59L28.5161 8.77432L25.5526 6.39453L17.59 12.6808H17.5863L17.5825 12.6845L9.61993 6.40201L6.66016 8.78181L17.5825 17.3992L17.5863 17.3955ZM17.5828 23.2891L17.5865 23.2854L32.2133 11.7456L35.1768 14.1254L28.5238 19.3752L17.5865 28L0.284376 14.3574L0 14.1291L2.95977 11.7531L17.5828 23.2891Z\\\" fill=\\\"#1E80FF\\\"/>\\n        </svg>\"},\"link\":\"https://juejin.cn/user/1398234521812008/posts\"}],\"footer\":{\"copyright\":\"Copyright Â© 2023-present å¼ºå¼º\"}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>